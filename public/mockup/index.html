<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suprema T&A - Time & Attendance System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans KR', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        slate: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-in': 'slideIn 0.3s ease-out',
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'bounce-in': 'bounceIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                    },
                    keyframes: {
                        slideIn: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(0)' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.9)', opacity: '0' },
                            '50%': { transform: 'scale(1.02)' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(100%)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .gradient-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        .stat-card {
            transition: none;
        }
        .nav-item {
            transition: all 0.2s ease;
        }
        .nav-item:hover {
            background: rgba(37, 99, 235, 0.1);
        }
        .nav-item.active {
            background: rgba(37, 99, 235, 0.15);
            border-right: 3px solid #2563eb;
        }
        .time-display {
            font-variant-numeric: tabular-nums;
        }
        .progress-ring {
            transition: stroke-dashoffset 0.5s ease;
        }
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .modal-overlay {
            animation: fadeIn 0.2s ease-out;
        }
        .modal-content {
            animation: slideUp 0.3s ease-out;
        }
        .toast {
            animation: slideIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-slate-50 antialiased">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef, createContext, useContext } = React;

        // Toast Context
        const ToastContext = createContext();

        const useToast = () => useContext(ToastContext);

        const ToastProvider = ({ children }) => {
            const [toasts, setToasts] = useState([]);

            const addToast = (message, type = 'success') => {
                const id = Date.now();
                setToasts(prev => [...prev, { id, message, type }]);
                setTimeout(() => {
                    setToasts(prev => prev.filter(t => t.id !== id));
                }, 3000);
            };

            return (
                <ToastContext.Provider value={{ addToast }}>
                    {children}
                    <div className="fixed bottom-4 right-4 z-50 space-y-2">
                        {toasts.map(toast => (
                            <div
                                key={toast.id}
                                className={`toast px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 ${
                                    toast.type === 'success' ? 'bg-green-500 text-white' :
                                    toast.type === 'error' ? 'bg-red-500 text-white' :
                                    toast.type === 'warning' ? 'bg-amber-500 text-white' :
                                    'bg-slate-800 text-white'
                                }`}
                            >
                                {toast.type === 'success' && (
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                    </svg>
                                )}
                                {toast.type === 'error' && (
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                )}
                                {toast.message}
                            </div>
                        ))}
                    </div>
                </ToastContext.Provider>
            );
        };

        // Modal Component
        const Modal = ({ isOpen, onClose, title, children, size = 'md' }) => {
            if (!isOpen) return null;

            const sizeClasses = {
                sm: 'max-w-md',
                md: 'max-w-lg',
                lg: 'max-w-2xl',
                xl: 'max-w-4xl',
            };

            return (
                <div className="modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" onClick={onClose}>
                    <div
                        className={`modal-content bg-white rounded-2xl shadow-2xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-hidden`}
                        onClick={e => e.stopPropagation()}
                    >
                        <div className="flex items-center justify-between p-6 border-b border-slate-100">
                            <h2 className="text-xl font-bold text-slate-800">{title}</h2>
                            <button
                                onClick={onClose}
                                className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                            >
                                <svg className="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        <div className="p-6 overflow-y-auto max-h-[calc(90vh-80px)]">
                            {children}
                        </div>
                    </div>
                </div>
            );
        };

        // Icons as components
        const Icons = {
            Home: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
            ),
            Clock: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            Calendar: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
            ),
            Document: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            ),
            Chart: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
            ),
            Settings: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            ),
            Bell: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                </svg>
            ),
            User: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            ),
            Users: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            ),
            Check: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                </svg>
            ),
            X: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
            ),
            ChevronRight: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                </svg>
            ),
            ChevronDown: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
            ),
            Plus: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                </svg>
            ),
            Plane: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
            ),
            Island: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 4c2-1 5-1 7 1-2 0-4 1-5 3m-2-4c-2-1-5-1-7 1 2 0 4 1 5 3" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 8c0 4-1 8-2 12" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 20c2-2 5-3 8-3s6 1 8 3" />
                </svg>
            ),
            Timer: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 21a9 9 0 100-18 9 9 0 000 18z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 1h6M12 1v2" />
                </svg>
            ),
            Briefcase: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
            ),
            Menu: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            ),
            Search: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            ),
            Download: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
            ),
            ExternalLink: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
            ),
            Clipboard: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                </svg>
            ),
            Building: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
            ),
        };

        // Progress Ring Component
        const ProgressRing = ({ progress, size = 120, strokeWidth = 10, color = "#2563eb" }) => {
            const radius = (size - strokeWidth) / 2;
            const circumference = radius * 2 * Math.PI;
            const strokeDashoffset = circumference - (progress / 100) * circumference;

            return (
                <svg width={size} height={size} className="transform -rotate-90">
                    <circle
                        stroke="#e2e8f0"
                        fill="transparent"
                        strokeWidth={strokeWidth}
                        r={radius}
                        cx={size / 2}
                        cy={size / 2}
                    />
                    <circle
                        stroke={color}
                        fill="transparent"
                        strokeWidth={strokeWidth}
                        strokeLinecap="round"
                        strokeDasharray={circumference}
                        strokeDashoffset={strokeDashoffset}
                        r={radius}
                        cx={size / 2}
                        cy={size / 2}
                        className="progress-ring"
                    />
                </svg>
            );
        };

        // Stat Card Component
        const StatCard = ({ icon, label, value, subValue, color, trend, onClick }) => (
            <div
                className={`stat-card bg-white rounded-2xl p-6 shadow-sm border border-slate-100 ${onClick ? 'cursor-pointer' : ''}`}
                onClick={onClick}
            >
                <div className="flex items-center justify-between mb-4">
                    <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${color}`}>
                        {icon}
                    </div>
                    {trend && (
                        <span className={`text-sm font-medium ${trend > 0 ? 'text-green-500' : 'text-red-500'}`}>
                            {trend > 0 ? '+' : ''}{trend}%
                        </span>
                    )}
                </div>
                <div className="text-3xl font-bold text-slate-800 mb-1">{value}</div>
                <div className="text-sm text-slate-500">{label}</div>
                {subValue && <div className="text-xs text-slate-400 mt-1">{subValue}</div>}
            </div>
        );

        // Time Clock Component with full functionality
        const TimeClock = ({ onClockIn, onClockOut, initialStatus = 'not-working' }) => {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [isWorking, setIsWorking] = useState(initialStatus === 'working');
            const [clockInTime, setClockInTime] = useState(initialStatus === 'working' ? (() => {
                const today = new Date();
                today.setHours(8, 32, 0, 0);
                return today;
            })() : null);
            const [workDuration, setWorkDuration] = useState('0h 00m');
            const toast = useToast();

            useEffect(() => {
                const timer = setInterval(() => {
                    const now = new Date();
                    setCurrentTime(now);

                    if (isWorking && clockInTime) {
                        const diff = now - clockInTime;
                        const hours = Math.floor(diff / (1000 * 60 * 60));
                        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                        setWorkDuration(`${hours}h ${minutes.toString().padStart(2, '0')}m`);
                    }
                }, 1000);
                return () => clearInterval(timer);
            }, [isWorking, clockInTime]);

            const handleClockAction = () => {
                if (isWorking) {
                    setIsWorking(false);
                    const clockOutTime = new Date();
                    toast.addToast(`퇴근 처리되었습니다. (${clockOutTime.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })})`, 'success');
                    setClockInTime(null);
                    setWorkDuration('0h 00m');
                    onClockOut && onClockOut(clockOutTime);
                } else {
                    const clockIn = new Date();
                    setIsWorking(true);
                    setClockInTime(clockIn);
                    toast.addToast(`출근 처리되었습니다. (${clockIn.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })})`, 'success');
                    onClockIn && onClockIn(clockIn);
                }
            };

            const formatTime = (date) => {
                return date.toLocaleTimeString('ko-KR', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
            };

            const formatDate = (date) => {
                return date.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });
            };

            const getExpectedClockOut = () => {
                if (!clockInTime) return null;
                const expected = new Date(clockInTime.getTime() + 9 * 60 * 60 * 1000); // 9 hours including break
                return expected.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
            };

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div className="flex items-start justify-between mb-4">
                        <div>
                            <div className="text-slate-500 text-sm mb-2">{formatDate(currentTime)}</div>
                            <div className="time-display text-4xl font-bold text-slate-800">{formatTime(currentTime)}</div>
                        </div>
                        {isWorking && clockInTime && (
                            <div className="text-right">
                                <div className="text-slate-600 text-xs mb-1">오늘 근무시간</div>
                                <div className="text-3xl font-bold text-primary-600">{workDuration}</div>
                            </div>
                        )}
                    </div>

                    <div className="flex items-center gap-3 mb-4">
                        <div className={`w-3 h-3 rounded-full ${isWorking ? 'bg-green-500 animate-pulse' : 'bg-slate-400'}`} />
                        <span className={`text-sm font-medium ${isWorking ? 'text-green-600' : 'text-slate-600'}`}>
                            {isWorking ? '근무중' : '미출근'}
                        </span>
                    </div>

                    {isWorking && clockInTime && (
                        <div className="p-3 bg-slate-50 rounded-xl border border-slate-100">
                            <div className="flex justify-between text-sm mb-2">
                                <span className="text-slate-600">출근 시각</span>
                                <span className="font-medium text-slate-800">{clockInTime.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })}</span>
                            </div>
                            <div className="flex justify-between text-sm">
                                <span className="text-slate-600">예상 퇴근</span>
                                <span className="font-medium text-slate-800">{getExpectedClockOut()}</span>
                            </div>
                        </div>
                    )}

                    {!isWorking && (
                        <button
                            onClick={handleClockAction}
                            className="w-full py-3 rounded-xl font-medium text-sm transition-colors bg-primary-600 text-white hover:bg-primary-700"
                        >
                            출근하기
                        </button>
                    )}
                </div>
            );
        };

        // Weekly Summary Component
        const WeeklySummary = ({ data }) => {
            const summaryData = data || {
                scheduled: '40h 00m',
                actual: '38h 20m',
                overtime: '2h 30m',
                remaining: '9h 30m',
                percentage: 96
            };

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h3 className="text-lg font-semibold text-slate-800 mb-4">이번 주 현황</h3>

                    <div className="space-y-4">
                        <div className="flex justify-between items-center">
                            <span className="text-slate-600">소정근로</span>
                            <span className="font-semibold text-slate-800">{summaryData.scheduled}</span>
                        </div>
                        <div className="flex justify-between items-center">
                            <span className="text-slate-600">실근로</span>
                            <span className="font-semibold text-slate-800">{summaryData.actual}</span>
                        </div>
                        <div className="h-2 bg-slate-100 rounded-full overflow-hidden">
                            <div
                                className={`h-full rounded-full transition-all duration-500 ${
                                    summaryData.percentage >= 100 ? 'bg-red-500' :
                                    summaryData.percentage >= 90 ? 'bg-amber-500' : 'bg-primary-500'
                                }`}
                                style={{ width: `${Math.min(summaryData.percentage, 100)}%` }}
                            />
                        </div>
                        <div className="flex justify-between items-center pt-2 border-t border-slate-100">
                            <span className="text-slate-600">연장근로</span>
                            <span className="font-semibold text-amber-600">{summaryData.overtime}</span>
                        </div>
                        <div className="flex justify-between items-center">
                            <span className="text-slate-600">잔여 연장가능</span>
                            <span className="font-semibold text-green-600">{summaryData.remaining}</span>
                        </div>
                    </div>

                    {summaryData.percentage >= 90 && (
                        <div className={`mt-4 p-3 rounded-xl border ${
                            summaryData.percentage >= 100 ? 'bg-red-50 border-red-100' : 'bg-amber-50 border-amber-100'
                        }`}>
                            <div className={`flex items-center gap-2 text-sm ${
                                summaryData.percentage >= 100 ? 'text-red-700' : 'text-amber-700'
                            }`}>
                                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                </svg>
                                <span>주 52시간 기준 {summaryData.percentage}% 도달</span>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Leave Balance Component
        const LeaveBalance = ({ onLeaveRequest }) => {
            const leaves = [
                { type: '연차휴가', used: 8, total: 15, color: 'bg-primary-500' },
                { type: '병가', used: 0, total: 3, color: 'bg-green-500' },
                { type: '경조휴가', used: 2, total: 5, color: 'bg-purple-500' },
            ];

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div className="flex items-center justify-between mb-4">
                        <h3 className="text-lg font-semibold text-slate-800">휴가 현황</h3>
                    </div>

                    {/* Remaining Leave Highlight */}
                    <div className="bg-purple-50 rounded-xl p-4 mb-4">
                        <div className="flex items-center justify-between">
                            <div>
                                <div className="text-sm text-purple-600 mb-1">잔여 연차</div>
                                <div className="text-3xl font-bold text-purple-700">7일</div>
                            </div>
                            <div className="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center">
                                <Icons.Plane className="text-white" />
                            </div>
                        </div>
                        <div className="text-xs text-purple-600 mt-2">총 15일 중 8일 사용</div>
                    </div>

                    <div className="space-y-4">
                        {leaves.map((leave, idx) => (
                            <div key={idx}>
                                <div className="flex justify-between items-center mb-2">
                                    <span className="text-slate-600 text-sm">{leave.type}</span>
                                    <span className="text-sm">
                                        <span className="font-semibold text-slate-800">{leave.used}</span>
                                        <span className="text-slate-400"> / {leave.total}일</span>
                                    </span>
                                </div>
                                <div className="h-2 bg-slate-100 rounded-full overflow-hidden">
                                    <div
                                        className={`h-full ${leave.color} rounded-full transition-all duration-500`}
                                        style={{ width: `${(leave.used / leave.total) * 100}%` }}
                                    />
                                </div>
                            </div>
                        ))}
                    </div>

                    <button
                        onClick={onLeaveRequest}
                        className="w-full mt-4 py-3 bg-primary-50 text-primary-600 rounded-xl font-medium hover:bg-primary-100 transition-colors flex items-center justify-center gap-2"
                    >
                        <Icons.Plus />
                        휴가 신청
                    </button>
                </div>
            );
        };

        // Pending Requests Component
        const PendingRequests = ({ onNewRequest, onRequestClick }) => {
            const [requests, setRequests] = useState([
                { id: 1, type: '연장근무', date: '01/27', status: 'pending', label: '승인 대기', detail: '2시간', approver: '박팀장', reason: '프로젝트 마감일 임박' },
                { id: 3, type: '외근', date: '01/30', status: 'pending', label: '승인 대기', detail: '강남 고객사', approver: '박팀장', reason: '고객사 미팅' },
                { id: 2, type: '휴가', date: '02/03', status: 'approved', label: '승인 완료', detail: '연차 1일', approver: '박팀장', reason: '개인 사정', approvedDate: '2026-01-28' },
            ]);

            const statusColors = {
                pending: 'bg-amber-100 text-amber-700',
                approved: 'bg-green-100 text-green-700',
                rejected: 'bg-red-100 text-red-700',
            };

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div className="flex items-center justify-between mb-4">
                        <h3 className="text-lg font-semibold text-slate-800">신청 현황</h3>
                        <span className="bg-primary-100 text-primary-700 px-2 py-1 rounded-full text-xs font-medium">
                            {requests.filter(r => r.status === 'pending').length}건 대기
                        </span>
                    </div>

                    <div className="space-y-3">
                        {requests.map((req) => (
                            <div
                                key={req.id}
                                onClick={() => onRequestClick && onRequestClick(req)}
                                className={`flex items-center justify-between p-4 rounded-xl transition-all cursor-pointer ${
                                    req.status === 'pending'
                                        ? 'bg-amber-50 border-2 border-amber-200 hover:bg-amber-100'
                                        : 'bg-slate-50 border border-slate-200 opacity-60 hover:opacity-80'
                                }`}
                            >
                                <div className="flex items-center gap-3">
                                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center shadow-sm ${
                                        req.status === 'pending' ? 'bg-white' : 'bg-slate-200'
                                    }`}>
                                        {req.type === '연장근무' && <Icons.Clock className={req.status === 'pending' ? '' : 'text-slate-500'} />}
                                        {req.type === '휴가' && <Icons.Plane className={req.status === 'pending' ? '' : 'text-slate-500'} />}
                                        {req.type === '외근' && <Icons.Briefcase className={req.status === 'pending' ? '' : 'text-slate-500'} />}
                                    </div>
                                    <div>
                                        <div className={`font-medium ${req.status === 'pending' ? 'text-slate-800' : 'text-slate-500'}`}>
                                            {req.type}
                                        </div>
                                        <div className={`text-xs ${req.status === 'pending' ? 'text-slate-600' : 'text-slate-400'}`}>
                                            {req.date} · {req.detail}
                                        </div>
                                    </div>
                                </div>
                                <span className={`px-3 py-1.5 rounded-full text-xs font-semibold ${
                                    req.status === 'pending'
                                        ? 'bg-amber-500 text-white'
                                        : 'bg-green-500 text-white'
                                }`}>
                                    {req.label}
                                </span>
                            </div>
                        ))}
                    </div>

                    <button
                        onClick={onNewRequest}
                        className="w-full mt-4 py-3 border-2 border-dashed border-slate-200 text-slate-500 rounded-xl font-medium hover:border-primary-300 hover:text-primary-600 transition-colors flex items-center justify-center gap-2"
                    >
                        <Icons.Plus />
                        새 신청
                    </button>
                </div>
            );
        };

        // Calendar Component
        const MiniCalendar = ({ onDateClick }) => {
            const [currentDate, setCurrentDate] = useState(new Date(2026, 0, 27));
            const today = 27;

            const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
            const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();

            const events = {
                3: [{ type: 'leave', label: '연차', color: 'bg-purple-500' }],
                15: [{ type: 'overtime', label: '연장 2h', color: 'bg-amber-500' }],
                20: [{ type: 'holiday', label: '공휴일', color: 'bg-red-500' }],
                22: [{ type: 'leave', label: '반차(오후)', color: 'bg-purple-500' }],
                27: [
                    { type: 'work', label: '정규근무', color: 'bg-blue-500' },
                    { type: 'meeting', label: '주간회의', color: 'bg-indigo-500' }
                ],
                28: [{ type: 'business', label: '출장', color: 'bg-green-500' }],
            };

            const generateCalendarDays = () => {
                const days = [];
                const prevMonthDays = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0).getDate();

                // Previous month days
                for (let i = firstDayOfMonth - 1; i >= 0; i--) {
                    days.push({ day: prevMonthDays - i, isCurrentMonth: false, events: null });
                }

                // Current month days
                for (let i = 1; i <= daysInMonth; i++) {
                    days.push({ day: i, isCurrentMonth: true, events: events[i] || null });
                }

                // Next month days
                const remainingDays = 42 - days.length;
                for (let i = 1; i <= remainingDays; i++) {
                    days.push({ day: i, isCurrentMonth: false, events: null });
                }

                return days;
            };

            const prevMonth = () => {
                setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));
            };

            const nextMonth = () => {
                setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));
            };

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div className="flex items-center justify-between mb-4">
                        <h3 className="text-lg font-semibold text-slate-800">
                            {currentDate.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long' })}
                        </h3>
                        <div className="flex gap-1">
                            <button
                                onClick={prevMonth}
                                className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                            >
                                <svg className="w-4 h-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>
                            <button
                                onClick={nextMonth}
                                className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                            >
                                <svg className="w-4 h-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div className="grid grid-cols-7 gap-1 text-center text-xs mb-2">
                        {['일', '월', '화', '수', '목', '금', '토'].map((day, idx) => (
                            <div key={day} className={`py-2 font-medium ${idx === 0 ? 'text-red-500' : idx === 6 ? 'text-blue-500' : 'text-slate-500'}`}>
                                {day}
                            </div>
                        ))}
                    </div>

                    <div className="grid grid-cols-7 gap-1">
                        {generateCalendarDays().map((dayData, idx) => (
                            <div
                                key={idx}
                                onClick={() => dayData.isCurrentMonth && onDateClick && onDateClick(dayData.day, dayData.events)}
                                className={`min-h-[80px] p-2 rounded-lg cursor-pointer border transition-all ${
                                    !dayData.isCurrentMonth ? 'bg-slate-50 text-slate-400 border-transparent' :
                                    dayData.day === today ? 'bg-blue-600 text-white border-blue-600 font-semibold' :
                                    'bg-white hover:bg-slate-50 border-slate-100'
                                }`}
                            >
                                <div className={`text-xs font-medium mb-1 ${
                                    idx % 7 === 0 && dayData.isCurrentMonth && dayData.day !== today ? 'text-red-500' :
                                    idx % 7 === 6 && dayData.isCurrentMonth && dayData.day !== today ? 'text-blue-500' : ''
                                }`}>
                                    {dayData.day}
                                </div>
                                {dayData.events && dayData.events.slice(0, 2).map((event, eIdx) => (
                                    <div
                                        key={eIdx}
                                        className={`${event.color} text-white text-[10px] px-1.5 py-0.5 rounded mb-1 truncate`}
                                    >
                                        {event.label}
                                    </div>
                                ))}
                                {dayData.events && dayData.events.length > 2 && (
                                    <div className="text-[10px] text-slate-500">+{dayData.events.length - 2}</div>
                                )}
                            </div>
                        ))}
                    </div>

                    <div className="flex flex-wrap gap-3 mt-4 pt-4 border-t border-slate-100">
                        <div className="flex items-center gap-2 text-xs text-slate-500">
                            <div className="w-2 h-2 rounded-full bg-purple-500" />
                            휴가
                        </div>
                        <div className="flex items-center gap-2 text-xs text-slate-500">
                            <div className="w-2 h-2 rounded-full bg-amber-500" />
                            연장
                        </div>
                        <div className="flex items-center gap-2 text-xs text-slate-500">
                            <div className="w-2 h-2 rounded-full bg-red-500" />
                            공휴일
                        </div>
                        <div className="flex items-center gap-2 text-xs text-slate-500">
                            <div className="w-2 h-2 rounded-full bg-green-500" />
                            출장
                        </div>
                    </div>
                </div>
            );
        };

        // Quick Actions Component
        const QuickActions = ({ onAction }) => {
            const actions = [
                { id: 'leave', icon: <Icons.Plane />, label: '휴가 신청', color: 'bg-purple-100 text-purple-600 hover:bg-purple-200', page: 'leave-request.html' },
                { id: 'overtime', icon: <Icons.Clock />, label: '연장근무', color: 'bg-amber-100 text-amber-600 hover:bg-amber-200', page: 'overtime-request.html' },
                { id: 'holiday-work', icon: <Icons.Calendar />, label: '휴일근무', color: 'bg-blue-100 text-blue-600 hover:bg-blue-200', page: 'overtime-request.html' },
                { id: 'business-trip', icon: <Icons.Briefcase />, label: '외근/출장', color: 'bg-green-100 text-green-600 hover:bg-green-200', page: 'business-trip-request.html' },
            ];

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h3 className="text-lg font-semibold text-slate-800 mb-4">빠른 신청</h3>
                    <div className="grid grid-cols-2 gap-3">
                        {actions.map((action) => (
                            <button
                                key={action.id}
                                onClick={() => {
                                    if (action.page) {
                                        window.location.href = action.page;
                                    } else {
                                        onAction && onAction(action.id);
                                    }
                                }}
                                className={`p-4 rounded-xl ${action.color} transition-all transform hover:scale-[1.02] active:scale-[0.98] flex flex-col items-center gap-2`}
                            >
                                {action.icon}
                                <span className="text-sm font-medium">{action.label}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // Notification Panel - Slide from Right
        const NotificationPanel = ({ isOpen, onClose, onUpdateUnread }) => {
            const [notifications, setNotifications] = useState([
                { id: 1, type: 'approval', message: '연장근무 신청이 승인되었습니다.', time: '10분 전', read: false, detail: '2시간 연장근무 신청이 박팀장님에 의해 승인되었습니다.' },
                { id: 2, type: 'reminder', message: '오늘 퇴근 시간이 다가옵니다.', time: '30분 전', read: false, detail: '정시 퇴근 시간 17:00까지 30분 남았습니다.' },
                { id: 3, type: 'info', message: '2월 휴가 신청 마감일이 1주일 남았습니다.', time: '1시간 전', read: true, detail: '2월 휴가 신청은 1월 31일까지 완료해주세요.' },
                { id: 4, type: 'warning', message: '이번 주 연장근무 한도의 80%를 사용했습니다.', time: '2시간 전', read: true, detail: '주간 연장근무 12시간 중 9.6시간을 사용하셨습니다. 한도 초과에 주의해주세요.' },
                { id: 5, type: 'approval', message: '휴가 신청이 승인되었습니다.', time: '어제', read: true, detail: '2월 3일 연차 휴가 신청이 승인되었습니다.' },
                { id: 6, type: 'system', message: '시스템 점검 안내', time: '2일 전', read: true, detail: '1월 30일 02:00~04:00 시스템 정기 점검이 예정되어 있습니다.' },
            ]);
            const [selectedNotif, setSelectedNotif] = useState(null);

            const markAllRead = () => {
                setNotifications(prev => prev.map(n => ({ ...n, read: true })));
                onUpdateUnread && onUpdateUnread(0);
            };

            const markAsRead = (id) => {
                setNotifications(prev => {
                    const updated = prev.map(n => n.id === id ? { ...n, read: true } : n);
                    const unread = updated.filter(n => !n.read).length;
                    onUpdateUnread && onUpdateUnread(unread);
                    return updated;
                });
            };

            const getNotifIcon = (type) => {
                switch (type) {
                    case 'approval':
                        return <svg className="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>;
                    case 'warning':
                        return <svg className="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>;
                    case 'reminder':
                        return <svg className="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
                    case 'system':
                        return <svg className="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;
                    default:
                        return <svg className="w-5 h-5 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
                }
            };

            const unreadCount = notifications.filter(n => !n.read).length;

            return (
                <>
                    {/* Overlay */}
                    <div
                        className={`fixed inset-0 bg-black/30 z-40 transition-opacity duration-300 ${isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}
                        onClick={onClose}
                    />

                    {/* Slide Panel */}
                    <div className={`fixed top-0 right-0 h-full w-96 bg-white shadow-2xl z-50 transition-transform duration-300 ease-out ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}>
                        {/* Header */}
                        <div className="h-16 px-6 flex items-center justify-between border-b border-slate-100">
                            <div className="flex items-center gap-3">
                                <h3 className="font-bold text-lg text-slate-800">알림</h3>
                                {unreadCount > 0 && (
                                    <span className="bg-red-500 text-white text-xs px-2 py-0.5 rounded-full">{unreadCount}개</span>
                                )}
                            </div>
                            <div className="flex items-center gap-2">
                                <button onClick={markAllRead} className="text-primary-600 text-sm font-medium hover:underline">모두 읽음</button>
                                <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-lg transition-colors">
                                    <svg className="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                        </div>

                        {/* Notification List */}
                        <div className="h-[calc(100%-4rem)] overflow-y-auto">
                            {notifications.map(notif => (
                                <div
                                    key={notif.id}
                                    onClick={() => {
                                        markAsRead(notif.id);
                                        setSelectedNotif(notif);
                                    }}
                                    className={`p-4 border-b border-slate-100 hover:bg-slate-50 cursor-pointer transition-all ${!notif.read ? 'bg-blue-50/50' : ''}`}
                                >
                                    <div className="flex items-start gap-3">
                                        <div className="w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center flex-shrink-0">
                                            {getNotifIcon(notif.type)}
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <div className="flex items-start justify-between gap-2">
                                                <p className={`text-sm ${!notif.read ? 'font-semibold text-slate-800' : 'text-slate-700'}`}>{notif.message}</p>
                                                {!notif.read && <div className="w-2 h-2 rounded-full bg-primary-500 flex-shrink-0 mt-1.5" />}
                                            </div>
                                            <span className="text-xs text-slate-400 mt-1 block">{notif.time}</span>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Detail Modal */}
                    {selectedNotif && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4" onClick={() => setSelectedNotif(null)}>
                            <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden" onClick={e => e.stopPropagation()}>
                                <div className="p-6 border-b border-slate-100 flex items-center gap-4">
                                    <div className="w-12 h-12 rounded-xl bg-slate-100 flex items-center justify-center">
                                        {getNotifIcon(selectedNotif.type)}
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-slate-800">{selectedNotif.message}</h3>
                                        <span className="text-xs text-slate-400">{selectedNotif.time}</span>
                                    </div>
                                </div>
                                <div className="p-6">
                                    <p className="text-slate-600">{selectedNotif.detail}</p>
                                </div>
                                <div className="p-4 border-t border-slate-100">
                                    <button
                                        onClick={() => setSelectedNotif(null)}
                                        className="w-full py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors"
                                    >
                                        확인
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        };

        // Profile Modal Component
        const ProfileModal = ({ isOpen, onClose }) => {
            const userProfile = {
                name: '김호준',
                avatar: '김',
                department: '개발팀',
                authority: '팀장',
                title: '선임',
                status: '단축근무', // '일반근무', '휴직', '단축근무'
            };

            const statusConfig = {
                '일반근무': { color: 'bg-green-100 text-green-700 border-green-200' },
                '단축근무': { color: 'bg-blue-100 text-blue-700 border-blue-200' },
                '휴직': { color: 'bg-slate-100 text-slate-700 border-slate-200' },
            };

            const handleLogout = () => {
                // In a real app, this would clear session and redirect to login
                alert('로그아웃 되었습니다.');
                onClose();
            };

            if (!isOpen) return null;

            return (
                <>
                    {/* Overlay */}
                    <div
                        className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 modal-overlay"
                        onClick={onClose}
                    >
                        {/* Modal */}
                        <div
                            className="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden modal-content"
                            onClick={e => e.stopPropagation()}
                        >
                            {/* Header with gradient background */}
                            <div className="bg-gradient-to-br from-primary-600 to-primary-800 p-8 text-white relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16" />
                                <div className="relative z-10 flex flex-col items-center">
                                    {/* Profile Image */}
                                    <div className="w-24 h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 border-4 border-white/30">
                                        <div className="w-20 h-20 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white font-bold text-3xl shadow-lg">
                                            {userProfile.avatar}
                                        </div>
                                    </div>
                                    {/* Name */}
                                    <h2 className="text-2xl font-bold mb-1">{userProfile.name}</h2>
                                    {/* Department with Authority */}
                                    <div className="flex items-center gap-2 text-primary-100">
                                        <span>{userProfile.department}</span>
                                        {userProfile.authority && (
                                            <>
                                                <span>·</span>
                                                <span className="px-2 py-0.5 bg-white/20 rounded-full text-xs font-medium">
                                                    {userProfile.authority}
                                                </span>
                                            </>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* Body */}
                            <div className="p-6 space-y-4">
                                {/* Title */}
                                <div className="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
                                    <span className="text-slate-600 font-medium">직급</span>
                                    <span className="text-slate-800 font-semibold">{userProfile.title}</span>
                                </div>

                                {/* User Status */}
                                <div className="flex items-center justify-between p-4 bg-slate-50 rounded-xl">
                                    <span className="text-slate-600 font-medium">근무 상태</span>
                                    <span className={`px-3 py-1 rounded-full text-sm font-medium border ${statusConfig[userProfile.status].color}`}>
                                        {userProfile.status}
                                    </span>
                                </div>

                                {/* Additional Info */}
                                <div className="p-4 bg-blue-50 border border-blue-100 rounded-xl">
                                    <div className="flex items-start gap-2 text-sm text-blue-700">
                                        <svg className="w-5 h-5 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                        <div>
                                            <div className="font-medium mb-1">단축근무 안내</div>
                                            <div className="text-blue-600 text-xs">
                                                소정근로시간: 주 32시간 (1일 6시간)
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Logout Button */}
                                <button
                                    onClick={handleLogout}
                                    className="w-full py-3 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                                    </svg>
                                    로그아웃
                                </button>

                                {/* Close Button */}
                                <button
                                    onClick={onClose}
                                    className="w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-medium hover:bg-slate-200 transition-colors"
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                </>
            );
        };

        // Sidebar Component
        const Sidebar = ({ activeMenu, setActiveMenu, collapsed, setCollapsed, onNavigate, onProfileClick, viewMode }) => {
            const menuItems = viewMode === 'hr' ? [
                { id: 'dashboard', icon: <Icons.Home />, label: '대시보드', page: null },
                { id: 'attendance', icon: <Icons.Clock />, label: '출퇴근 기록', page: 'attendance-records.html' },
                { id: 'leave', icon: <Icons.Island />, label: '휴가 관리', page: 'leave-management.html' },
                { id: 'overtime', icon: <Icons.Timer />, label: '연장/휴일근무', page: 'overtime-management.html' },
                { id: 'business-trip', icon: <Icons.Briefcase />, label: '외근 및 출장', page: 'business-trip-management.html' },
                { id: 'management', icon: <Icons.Building />, label: '근무 규칙 관리', page: 'management.html' },
                { id: 'company', icon: <Icons.Building />, label: '회사 규칙', page: 'company-settings.html' },
                { id: 'reports', icon: <Icons.Chart />, label: '리포트', page: 'reports.html?mode=hr' },
                { id: 'settings', icon: <Icons.Settings />, label: '설정', page: 'settings.html?mode=hr' },
            ] : [
                { id: 'dashboard', icon: <Icons.Home />, label: '대시보드', page: null },
                { id: 'attendance', icon: <Icons.Clock />, label: '출퇴근 기록', page: 'emp-attendance-records.html' },
                { id: 'leave', icon: <Icons.Island />, label: '휴가관리', page: 'emp-leave-management.html' },
                { id: 'overtime', icon: <Icons.Timer />, label: '연장/휴일 근무', page: 'emp-overtime-management.html' },
                { id: 'business-trip', icon: <Icons.Briefcase />, label: '외근 및 출장', page: 'emp-business-trip-management.html' },
                { id: 'team', icon: <Icons.Users />, label: '팀 근무 관리', badge: 3, page: 'team-management.html?mode=employee' },
                { id: 'reports', icon: <Icons.Chart />, label: '리포트', page: 'reports.html?mode=employee' },
                { id: 'settings', icon: <Icons.Settings />, label: '설정', page: 'settings.html?mode=employee' },
            ];

            const handleMenuClick = (item) => {
                setActiveMenu(item.id);
                if (item.page) {
                    window.location.href = item.page;
                }
            };

            return (
                <aside className={`fixed left-0 top-0 h-full bg-white border-r border-slate-200 transition-all duration-300 z-40 ${collapsed ? 'w-20' : 'w-64'}`}>
                    {/* Logo */}
                    <div className="h-16 flex items-center justify-between px-4 border-b border-slate-100">
                        {!collapsed && (
                            <div className="flex items-center gap-3">
                                <div className="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center">
                                    <span className="text-white font-bold text-sm">S</span>
                                </div>
                                <span className="font-bold text-slate-800">Suprema T&A</span>
                            </div>
                        )}
                        <button
                            onClick={() => setCollapsed(!collapsed)}
                            className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                        >
                            <Icons.Menu />
                        </button>
                    </div>

                    {/* Navigation */}
                    <nav className="p-3 space-y-1">
                        {menuItems.map((item) => (
                            <button
                                key={item.id}
                                onClick={() => handleMenuClick(item)}
                                className={`nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ${
                                    activeMenu === item.id
                                        ? 'active bg-primary-50 text-primary-600'
                                        : 'text-slate-600 hover:text-slate-800'
                                }`}
                            >
                                <span className={activeMenu === item.id ? 'text-primary-600' : 'text-slate-400'}>
                                    {item.icon}
                                </span>
                                {!collapsed && (
                                    <>
                                        <span className="font-medium flex-1">{item.label}</span>
                                        {item.badge && (
                                            <span className="bg-red-500 text-white text-xs px-2 py-0.5 rounded-full">
                                                {item.badge}
                                            </span>
                                        )}
                                    </>
                                )}
                            </button>
                        ))}
                    </nav>

                    {/* User Profile */}
                    {!collapsed && (
                        <div className="absolute bottom-0 left-0 right-0 p-4 border-t border-slate-100">
                            <div
                                onClick={onProfileClick}
                                className="flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100 transition-colors"
                            >
                                <div className="w-10 h-10 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white font-semibold">
                                    김
                                </div>
                                <div className="flex-1 min-w-0">
                                    <div className="font-medium text-slate-800 truncate">김호준</div>
                                    <div className="text-xs text-slate-500">개발팀 · 선임</div>
                                </div>
                                <Icons.ChevronRight />
                            </div>
                        </div>
                    )}
                </aside>
            );
        };

        // Header Component
        const Header = ({ collapsed, viewMode, setViewMode, onNewRequest, onModeChange }) => {
            const [showNotifications, setShowNotifications] = useState(false);
            const [unreadCount, setUnreadCount] = useState(2);

            return (
                <>
                    <header className={`fixed top-0 right-0 h-16 bg-white/80 backdrop-blur-lg border-b border-slate-100 z-30 transition-all duration-300 ${collapsed ? 'left-20' : 'left-64'}`}>
                        <div className="h-full px-6 flex items-center justify-end">
                            <div className="flex items-center gap-4">
                                {/* View Mode Toggle */}
                                <div className="flex bg-slate-100 rounded-xl p-1">
                                    <button
                                        onClick={() => window.location.href = 'emp-index.html'}
                                        className="px-3 py-1.5 rounded-lg text-sm font-medium transition-all text-slate-600 hover:text-slate-800"
                                    >
                                        직원
                                    </button>
                                    <button
                                        className="px-3 py-1.5 rounded-lg text-sm font-medium transition-all bg-white text-primary-600 shadow-sm"
                                    >
                                        HR 관리자
                                    </button>
                                </div>

                                {/* Notifications */}
                                <button
                                    onClick={() => setShowNotifications(true)}
                                    className="relative p-2 hover:bg-slate-100 rounded-xl transition-colors"
                                >
                                    <Icons.Bell />
                                    {unreadCount > 0 && (
                                        <span className="absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">
                                            {unreadCount}
                                        </span>
                                    )}
                                </button>

                            </div>
                        </div>
                    </header>
                    <NotificationPanel isOpen={showNotifications} onClose={() => setShowNotifications(false)} onUpdateUnread={setUnreadCount} />
                </>
            );
        };

        // Main Dashboard Page
        const DashboardPage = ({ showRequestModal, setShowRequestModal }) => {
            const toast = useToast();
            const [showRequestDetailModal, setShowRequestDetailModal] = useState(false);
            const [selectedRequest, setSelectedRequest] = useState(null);
            const [selectedDate, setSelectedDate] = useState(null);

            const handleClockIn = (time) => {
                console.log('Clock in:', time);
            };

            const handleClockOut = (time) => {
                console.log('Clock out:', time);
            };

            const handleDateClick = (day, event) => {
                if (event) {
                    toast.addToast(`${day}일: ${event.label}`, 'info');
                }
            };

            const handleQuickAction = (actionId) => {
                if (actionId === 'business-trip') {
                    toast.addToast('외근/출장 신청 기능은 준비 중입니다.', 'warning');
                }
            };

            const handleRequestClick = (request) => {
                setSelectedRequest(request);
                setShowRequestDetailModal(true);
            };

            const handleApproveRequest = () => {
                toast.addToast(`${selectedRequest.type} 신청이 승인되었습니다.`, 'success');
                setShowRequestDetailModal(false);
            };

            const handleRejectRequest = () => {
                toast.addToast(`${selectedRequest.type} 신청이 반려되었습니다.`, 'info');
                setShowRequestDetailModal(false);
            };

            return (
                <div className="space-y-6 animate-fade-in">
                    {/* Welcome Banner */}
                    <div className="bg-gradient-to-r from-primary-600 to-primary-800 rounded-2xl p-6 text-white relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full -translate-y-48 translate-x-48" />
                        <div className="relative z-10">
                            <h1 className="text-2xl font-bold mb-2">안녕하세요, 김호준님</h1>
                            <p className="text-primary-100">오늘도 좋은 하루 되세요. 현재 근무 현황을 확인해 보세요.</p>
                        </div>
                    </div>

                    {/* Main Content Grid */}
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* Left Column - 2/3 width */}
                        <div className="lg:col-span-2 space-y-6">
                            {/* Calendar */}
                            <MiniCalendar onDateClick={handleDateClick} />

                            {/* Two boxes below calendar */}
                            <div className="grid grid-cols-2 gap-6">
                                {/* Weekly Summary */}
                                <WeeklySummary />

                                {/* Leave Balance */}
                                <LeaveBalance onLeaveRequest={() => window.location.href = 'leave-request.html'} />
                            </div>
                        </div>

                        {/* Right Column - 1/3 width */}
                        <div className="space-y-6">
                            {/* Blue Time Clock */}
                            <TimeClock
                                onClockIn={handleClockIn}
                                onClockOut={handleClockOut}
                                initialStatus="working"
                            />

                            {/* Request Status */}
                            <PendingRequests
                                onNewRequest={() => setShowRequestModal(true)}
                                onRequestClick={handleRequestClick}
                            />

                            {/* Quick Actions */}
                            <QuickActions onAction={handleQuickAction} />
                        </div>
                    </div>

                    {/* Request Type Modal */}
                    <Modal
                        isOpen={showRequestModal}
                        onClose={() => setShowRequestModal(false)}
                        title="신청 유형 선택"
                    >
                        <div className="grid grid-cols-2 gap-4">
                            <button
                                onClick={() => window.location.href = 'leave-request.html'}
                                className="p-6 bg-purple-50 hover:bg-purple-100 rounded-xl transition-colors text-left"
                            >
                                <div className="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mb-4">
                                    <Icons.Plane />
                                </div>
                                <h3 className="font-semibold text-slate-800 mb-1">휴가 신청</h3>
                                <p className="text-sm text-slate-500">연차, 반차, 병가 등</p>
                            </button>
                            <button
                                onClick={() => window.location.href = 'overtime-request.html'}
                                className="p-6 bg-amber-50 hover:bg-amber-100 rounded-xl transition-colors text-left"
                            >
                                <div className="w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center mb-4">
                                    <Icons.Clock />
                                </div>
                                <h3 className="font-semibold text-slate-800 mb-1">연장근무 신청</h3>
                                <p className="text-sm text-slate-500">사전/사후 연장근무</p>
                            </button>
                            <button
                                onClick={() => window.location.href = 'overtime-request.html?type=holiday'}
                                className="p-6 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors text-left"
                            >
                                <div className="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mb-4">
                                    <Icons.Calendar />
                                </div>
                                <h3 className="font-semibold text-slate-800 mb-1">휴일근무 신청</h3>
                                <p className="text-sm text-slate-500">주말, 공휴일 근무</p>
                            </button>
                            <button
                                onClick={() => window.location.href = 'business-trip-request.html'}
                                className="p-6 bg-green-50 hover:bg-green-100 rounded-xl transition-colors text-left"
                            >
                                <div className="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center mb-4">
                                    <Icons.Briefcase />
                                </div>
                                <h3 className="font-semibold text-slate-800 mb-1">외근/출장</h3>
                                <p className="text-sm text-slate-500">외부 근무 신청</p>
                            </button>
                        </div>
                    </Modal>

                    {/* Request Detail Modal */}
                    {selectedRequest && (
                        <Modal
                            isOpen={showRequestDetailModal}
                            onClose={() => setShowRequestDetailModal(false)}
                            title="신청 상세"
                        >
                            <div className="space-y-4">
                                {/* Request Info */}
                                <div className="bg-slate-50 rounded-xl p-4">
                                    <div className="flex items-center gap-3 mb-3">
                                        <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${
                                            selectedRequest.type === '연장근무' ? 'bg-amber-500' :
                                            selectedRequest.type === '휴가' ? 'bg-purple-500' :
                                            'bg-green-500'
                                        }`}>
                                            {selectedRequest.type === '연장근무' && <Icons.Clock />}
                                            {selectedRequest.type === '휴가' && <Icons.Plane />}
                                            {selectedRequest.type === '외근' && <Icons.Briefcase />}
                                        </div>
                                        <div>
                                            <h3 className="font-semibold text-slate-800 text-lg">{selectedRequest.type}</h3>
                                            <p className="text-sm text-slate-500">{selectedRequest.detail}</p>
                                        </div>
                                    </div>
                                    <div className="flex items-center justify-between">
                                        <span className="text-sm text-slate-600">상태</span>
                                        <span className={`px-3 py-1.5 rounded-full text-xs font-semibold ${
                                            selectedRequest.status === 'pending' ? 'bg-amber-500 text-white' : 'bg-green-500 text-white'
                                        }`}>
                                            {selectedRequest.label}
                                        </span>
                                    </div>
                                </div>

                                {/* Details */}
                                <div className="space-y-3">
                                    <div className="flex items-center justify-between py-2 border-b border-slate-100">
                                        <span className="text-sm text-slate-500">신청일</span>
                                        <span className="text-sm font-medium text-slate-800">{selectedRequest.date}</span>
                                    </div>
                                    <div className="flex items-center justify-between py-2 border-b border-slate-100">
                                        <span className="text-sm text-slate-500">결재자</span>
                                        <span className="text-sm font-medium text-slate-800">{selectedRequest.approver}</span>
                                    </div>
                                    {selectedRequest.approvedDate && (
                                        <div className="flex items-center justify-between py-2 border-b border-slate-100">
                                            <span className="text-sm text-slate-500">승인일</span>
                                            <span className="text-sm font-medium text-slate-800">{selectedRequest.approvedDate}</span>
                                        </div>
                                    )}
                                    <div className="py-2">
                                        <span className="text-sm text-slate-500 block mb-2">사유</span>
                                        <p className="text-sm text-slate-800">{selectedRequest.reason}</p>
                                    </div>
                                </div>

                            </div>
                        </Modal>
                    )}
                </div>
            );
        };

        // HR Admin Dashboard
        const HRDashboard = () => {
            const toast = useToast();
            const [dateFilter, setDateFilter] = useState('today');
            const [selectedDept, setSelectedDept] = useState('all');
            const [selectedPosition, setSelectedPosition] = useState('all');
            const [showNoticeModal, setShowNoticeModal] = useState(false);
            const selectedEmployeeCount = 300;

            const todayStats = [
                { label: '출근 인원', value: 287, color: 'text-green-600', bg: 'bg-green-100' },
                { label: '지각 인원', value: 3, color: 'text-amber-600', bg: 'bg-amber-100' },
                { label: '미출근 인원', value: 2, color: 'text-red-600', bg: 'bg-red-100' },
                { label: '연장근무 인원', value: 24, color: 'text-blue-600', bg: 'bg-blue-100' },
                { label: '휴가 인원', value: 8, color: 'text-purple-600', bg: 'bg-purple-100' },
            ];

            const missingRecords = [
                { id: 1, name: '김철수', dept: '개발1팀', date: '오늘', type: '퇴근', avatar: '김' },
                { id: 2, name: '이영희', dept: '디자인팀', date: '01/26', type: '출근', avatar: '이' },
                { id: 3, name: '박지훈', dept: '영업팀', date: '01/26', type: '퇴근', avatar: '박' },
            ];

            const riskEmployees = [
                { name: '박민수', dept: '개발1팀', position: '책임', hours: 48, max: 52, avatar: '박' },
                { name: '최준혁', dept: '마케팅팀', position: '선임', hours: 46, max: 52, avatar: '최' },
                { name: '이수진', dept: '영업팀', position: '사원', hours: 44, max: 52, avatar: '이' },
            ];

            const pendingApprovals = [
                { type: '휴가', count: 8, icon: <Icons.Plane />, color: 'bg-purple-100', link: 'leave-management.html?status=pending' },
                { type: '연장근무', count: 12, icon: <Icons.Clock />, color: 'bg-amber-100', link: 'overtime-management.html?status=대기&type=연장근무' },
                { type: '외근 및 출장', count: 5, icon: <Icons.Briefcase />, color: 'bg-green-100', link: 'requests-management.html?status=pending&type=외근 및 출장' },
                { type: '휴일근무', count: 3, icon: <Icons.Calendar />, color: 'bg-blue-100', link: 'overtime-management.html?status=대기&type=휴일근무' },
                { type: '근태조정', count: 2, icon: <Icons.Document />, color: 'bg-slate-100', link: 'requests-management.html?status=pending&type=근태조정' },
            ];

            const leaveData = [
                { type: '연차', employees: [{ name: '김민수', dept: '개발팀' }, { name: '이수진', dept: '마케팅팀' }] },
                { type: '병가', employees: [{ name: '박철수', dept: '영업팀' }] },
                { type: '경조', employees: [{ name: '최영희', dept: '인사팀' }] },
                { type: '연수휴가', employees: [{ name: '정미숙', dept: '디자인팀' }] },
            ];

            const [selectedNotice, setSelectedNotice] = useState(null);

            const notices = [
                { id: 1, title: '2026년 2월 휴가 신청 마감 안내', date: '2026-01-25', author: '인사팀 김민수', content: '2026년 2월 휴가 신청 마감일을 안내드립니다.\n\n■ 마감일: 2026년 1월 31일 (금) 18:00\n■ 대상: 전 직원\n■ 신청 방법: 근태관리 시스템 > 휴가 신청\n\n2월 중 연차 사용을 계획하고 계신 분들은 마감일 전까지 반드시 신청을 완료해 주시기 바랍니다. 마감 이후에는 긴급 휴가만 별도 승인 절차를 통해 처리됩니다.\n\n문의사항은 인사팀(내선 1234)으로 연락 부탁드립니다.', images: ['https://placehold.co/600x200/e2e8f0/64748b?text=2월+휴가+일정표'] },
                { id: 2, title: '근태 관리 시스템 업데이트 완료', date: '2026-01-20', author: 'IT팀 박지훈', content: '근태 관리 시스템 업데이트가 완료되었습니다.\n\n■ 업데이트 일시: 2026년 1월 19일 (일) 22:00 ~ 20일 (월) 06:00\n■ 주요 변경사항:\n  1. 출퇴근 기록 조회 속도 개선\n  2. 모바일 앱 출퇴근 인증 기능 추가\n  3. 연장근무 자동 계산 로직 개선\n  4. 휴가 잔여일수 실시간 반영\n\n업데이트 후 문제가 발생할 경우 IT팀(내선 5678)으로 즉시 연락 바랍니다.', images: ['https://placehold.co/600x200/e2e8f0/64748b?text=시스템+업데이트+안내'] },
                { id: 3, title: '설 연휴 근무 일정 공지', date: '2026-01-15', author: '경영지원팀 이수진', content: '2026년 설 연휴 근무 일정을 공지합니다.\n\n■ 설 연휴: 2026년 2월 16일 (월) ~ 2월 18일 (수)\n■ 정상 근무일: 2월 13일 (금), 2월 19일 (목)\n\n연휴 기간 중 필수 근무자는 각 팀장과 사전 협의 후 휴일근무 신청을 완료해 주세요.\n\n■ 휴일근무 수당: 통상임금의 150%\n■ 대체휴무: 휴일근무 후 1개월 이내 사용\n\n즐거운 설 연휴 보내세요!', images: ['https://placehold.co/600x200/e2e8f0/64748b?text=설+연휴+일정'] },
            ];

            const handleSendNotifications = () => {
                toast.addToast('출퇴근 누락 알림이 발송되었습니다.', 'success');
            };

            const getCurrentDate = () => {
                const today = new Date();
                return today.toLocaleDateString('ko-KR', {
                    year: 'numeric', month: 'long', day: 'numeric', weekday: 'long'
                });
            };

            return (
                <div className="space-y-6 animate-fade-in">
                    {/* Sticky Filter Bar */}
                    <div className="sticky-filter-bar -mx-6 px-6 py-4">
                        {/* Date */}
                        <h1 className="text-2xl font-bold text-slate-800 mb-3">{getCurrentDate()}</h1>

                        {/* Date Filter Tabs */}
                        <div className="flex bg-slate-100 rounded-lg p-1 mb-4 w-fit">
                            {['today', 'week', 'month'].map(f => (
                                <button key={f} onClick={() => setDateFilter(f)}
                                    className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${
                                        dateFilter === f ? 'bg-white text-slate-800 shadow-sm' : 'text-slate-600'
                                    }`}>
                                    {f === 'today' ? '오늘' : f === 'week' ? '이번 주' : '이번 달'}
                                </button>
                            ))}
                        </div>

                        {/* Filters */}
                        <div className="flex items-center gap-4">
                            <div className="flex items-center gap-2">
                                <label className="text-sm font-medium text-slate-700">조직</label>
                                <select value={selectedDept} onChange={e => setSelectedDept(e.target.value)}
                                    className="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500">
                                    <option value="all">전체</option>
                                    <option value="dev">개발팀</option>
                                    <option value="marketing">마케팅팀</option>
                                    <option value="sales">영업팀</option>
                                    <option value="hr">인사팀</option>
                                    <option value="support">경영지원팀</option>
                                </select>
                            </div>
                            <div className="flex items-center gap-2">
                                <label className="text-sm font-medium text-slate-700">직급</label>
                                <select value={selectedPosition} onChange={e => setSelectedPosition(e.target.value)}
                                    className="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500">
                                    <option value="all">전체</option>
                                    <option value="사원">사원</option>
                                    <option value="선임">선임</option>
                                    <option value="책임">책임</option>
                                    <option value="수석">수석</option>
                                    <option value="팀장">팀장</option>
                                </select>
                            </div>
                            <span className="text-sm text-slate-600">
                                선택된 직원: <span className="font-semibold text-primary-600">{selectedEmployeeCount}명</span>
                            </span>
                        </div>
                    </div>

                    {/* Today Stats */}
                    <div className="grid grid-cols-5 gap-4">
                        {todayStats.map((stat, idx) => (
                            <div key={idx} className="bg-white rounded-2xl p-6 border border-slate-100 text-center">
                                <div className={`w-12 h-12 ${stat.bg} rounded-xl flex items-center justify-center mx-auto mb-3`}>
                                    <span className={`text-xl font-bold ${stat.color}`}>{stat.value}</span>
                                </div>
                                <div className="text-slate-600 font-medium">{stat.label}</div>
                            </div>
                        ))}
                    </div>

                    {/* Main Grid */}
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* Missing Records */}
                        <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-slate-800">출퇴근 누락</h3>
                                <span className="bg-amber-100 text-amber-700 px-2 py-1 rounded-full text-xs font-medium">
                                    {missingRecords.length}건
                                </span>
                            </div>
                            <div className="space-y-3">
                                {missingRecords.map(rec => (
                                    <div key={rec.id} className="flex items-center justify-between p-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors cursor-pointer">
                                        <div className="flex items-center gap-3">
                                            <div className="w-10 h-10 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full flex items-center justify-center text-white font-semibold">
                                                {rec.avatar}
                                            </div>
                                            <div>
                                                <div className="font-medium text-slate-800">{rec.name}</div>
                                                <div className="text-xs text-slate-500">{rec.dept} · {rec.date}</div>
                                            </div>
                                        </div>
                                        <span className="px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium">
                                            {rec.type} 누락
                                        </span>
                                    </div>
                                ))}
                            </div>
                            <div className="flex gap-2 mt-4">
                                <button onClick={handleSendNotifications}
                                    className="flex-1 py-2 bg-primary-600 text-white rounded-xl text-sm font-medium hover:bg-primary-700 transition-colors">
                                    알림 일괄 발송
                                </button>
                                <button className="flex-1 py-2 text-primary-600 font-medium hover:bg-primary-50 rounded-xl transition-colors text-sm">
                                    전체 보기
                                </button>
                            </div>
                        </div>

                        {/* 52-hour Risk */}
                        <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-slate-800">52시간 초과 위험</h3>
                                <span className="bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs font-medium">
                                    {riskEmployees.length}명
                                </span>
                            </div>
                            <div className="space-y-4">
                                {riskEmployees.map((emp, idx) => (
                                    <div key={idx} className="p-3 bg-red-50 rounded-xl border border-red-100">
                                        <div className="flex items-center justify-between mb-2">
                                            <div className="flex items-center gap-3">
                                                <div className="w-10 h-10 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center text-white font-semibold">
                                                    {emp.avatar}
                                                </div>
                                                <div>
                                                    <span className="font-medium text-slate-800">{emp.name}</span>
                                                    <div className="text-xs text-slate-500">{emp.dept} · {emp.position}</div>
                                                </div>
                                            </div>
                                            <span className="text-red-600 font-semibold text-sm">{emp.hours}h/{emp.max}h</span>
                                        </div>
                                        <div className="h-2 bg-red-200 rounded-full overflow-hidden">
                                            <div className="h-full bg-red-500 rounded-full" style={{ width: `${(emp.hours / emp.max) * 100}%` }} />
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <button className="w-full mt-4 py-2 text-red-600 font-medium hover:bg-red-50 rounded-xl transition-colors text-sm">
                                전체 보기
                            </button>
                        </div>

                        {/* Pending Approvals */}
                        <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-slate-800">승인 대기</h3>
                                <span className="bg-primary-100 text-primary-700 px-2 py-1 rounded-full text-xs font-medium">
                                    {pendingApprovals.reduce((s, i) => s + i.count, 0)}건
                                </span>
                            </div>
                            <div className="space-y-2">
                                {pendingApprovals.map((item, idx) => (
                                    <button key={idx}
                                        onClick={() => window.location.href = item.link}
                                        className="w-full flex items-center justify-between p-3 hover:bg-slate-50 rounded-xl cursor-pointer transition-colors">
                                        <div className="flex items-center gap-3">
                                            <div className={`w-10 h-10 ${item.color} rounded-lg flex items-center justify-center text-slate-600`}>
                                                {item.icon}
                                            </div>
                                            <span className="font-medium text-slate-700">{item.type}</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span className="font-semibold text-slate-800">{item.count}건</span>
                                            <Icons.ChevronRight />
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Second Row: Leave Status and Notices */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {/* Leave Status */}
                        <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-slate-800">휴가 현황</h3>
                                <button onClick={() => window.location.href='leave-management.html'} className="text-primary-600 text-sm font-medium hover:underline">전체 보기</button>
                            </div>
                            <div className="space-y-4">
                                {leaveData.map((leave, idx) => (
                                    <div key={idx}>
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-sm font-medium text-slate-700">{leave.type}</span>
                                            <span className="text-xs text-slate-500">{leave.employees.length}명</span>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {leave.employees.map((emp, empIdx) => (
                                                <div key={empIdx} className="flex items-center gap-2 px-3 py-1.5 bg-purple-50 rounded-lg">
                                                    <span className="text-sm text-slate-700">{emp.name}</span>
                                                    <span className="text-xs text-slate-500">({emp.dept})</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Notices */}
                        <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-semibold text-slate-800">공지사항</h3>
                                <button onClick={() => setShowNoticeModal(true)}
                                    className="text-primary-600 text-sm font-medium hover:underline">전체 보기</button>
                            </div>
                            <div className="space-y-3">
                                {notices.map(notice => (
                                    <div key={notice.id} onClick={() => setSelectedNotice(notice)} className="p-3 hover:bg-slate-50 rounded-xl cursor-pointer transition-colors">
                                        <div className="font-medium text-slate-800 mb-1">{notice.title}</div>
                                        <div className="text-xs text-slate-500">{notice.date}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Notice List Modal */}
                    <Modal isOpen={showNoticeModal} onClose={() => setShowNoticeModal(false)} title="공지사항" size="lg">
                        <div className="space-y-4">
                            {notices.map(notice => (
                                <div key={notice.id} onClick={() => { setShowNoticeModal(false); setSelectedNotice(notice); }} className="p-4 border border-slate-200 rounded-xl hover:border-primary-200 cursor-pointer transition-colors">
                                    <div className="font-semibold text-slate-800 mb-2">{notice.title}</div>
                                    <div className="text-sm text-slate-600 mb-2 line-clamp-2">{notice.content}</div>
                                    <div className="flex items-center gap-3 text-xs text-slate-400">
                                        <span>{notice.author}</span>
                                        <span>{notice.date}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </Modal>

                    {/* Notice Detail Modal */}
                    {selectedNotice && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" onClick={() => setSelectedNotice(null)}>
                            <div className="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden" onClick={e => e.stopPropagation()}>
                                <div className="flex items-center justify-between p-6 border-b border-slate-100">
                                    <h2 className="text-xl font-bold text-slate-800">공지사항</h2>
                                    <button onClick={() => setSelectedNotice(null)} className="p-2 hover:bg-slate-100 rounded-lg transition-colors">
                                        <svg className="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                        </svg>
                                    </button>
                                </div>
                                <div className="p-6 overflow-y-auto" style={{maxHeight: 'calc(90vh - 160px)'}}>
                                    <h3 className="text-lg font-bold text-slate-800 mb-3">{selectedNotice.title}</h3>
                                    <div className="flex items-center gap-4 mb-6 text-sm text-slate-500">
                                        <div className="flex items-center gap-2">
                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                                            <span>{selectedNotice.author}</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                            <span>{selectedNotice.date}</span>
                                        </div>
                                    </div>
                                    <div className="prose prose-slate max-w-none mb-6">
                                        {selectedNotice.content.split('\n').map((line, i) => (
                                            <p key={i} className={`text-sm text-slate-700 ${line.trim() === '' ? 'mb-3' : 'mb-1'}`}>
                                                {line || '\u00A0'}
                                            </p>
                                        ))}
                                    </div>
                                    {selectedNotice.images && selectedNotice.images.length > 0 && (
                                        <div className="space-y-3 mb-6">
                                            {selectedNotice.images.map((img, i) => (
                                                <img key={i} src={img} alt="" className="w-full rounded-xl border border-slate-200" />
                                            ))}
                                        </div>
                                    )}
                                </div>
                                <div className="p-6 border-t border-slate-100">
                                    <a href="https://gw.suprema.co.kr/WebSite/Basic/Board/BoardView.aspx?system=Board&BoardType=Normal&FromOuterYN=N&fdid=1250&MsgId=118520&DateBarYN=Y&BoardGubun=Normal&PageSize=15&PageCurrent=1&SortField=MessageID&SortDirection=DESC&Cate=0&CateGubunYN=N&CateNm=&SearchGubun=All&SearchKeyword=&SelectedDay=All&SDate=&EDate=&LinkID="
                                        target="_blank" rel="noopener noreferrer"
                                        className="w-full py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors flex items-center justify-center gap-2">
                                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                        그룹웨어에서 보기
                                    </a>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [activeMenu, setActiveMenu] = useState('dashboard');
            const [collapsed, setCollapsed] = useState(false);
            const [viewMode, setViewMode] = useState('hr');
            const [showProfileModal, setShowProfileModal] = useState(false);
            const [showRequestModal, setShowRequestModal] = useState(false);

            return (
                <ToastProvider>
                    <div className="min-h-screen bg-slate-50">
                        <Sidebar
                            activeMenu={activeMenu}
                            setActiveMenu={setActiveMenu}
                            collapsed={collapsed}
                            setCollapsed={setCollapsed}
                            onProfileClick={() => setShowProfileModal(true)}
                            viewMode={viewMode}
                        />
                        <Header
                            collapsed={collapsed}
                            viewMode={viewMode}
                            setViewMode={setViewMode}
                            onNewRequest={() => setShowRequestModal(true)}
                            onModeChange={(mode) => { setViewMode(mode); setActiveMenu('dashboard'); }}
                        />

                        <main className={`pt-16 transition-all duration-300 ${collapsed ? 'ml-20' : 'ml-64'}`}>
                            <div className="p-6">
                                {viewMode === 'employee' ? (
                                    <DashboardPage
                                        showRequestModal={showRequestModal}
                                        setShowRequestModal={setShowRequestModal}
                                    />
                                ) : (
                                    <HRDashboard />
                                )}
                            </div>
                        </main>

                        {/* Profile Modal */}
                        <ProfileModal
                            isOpen={showProfileModal}
                            onClose={() => setShowProfileModal(false)}
                        />
                    </div>
                </ToastProvider>
            );
        };

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
