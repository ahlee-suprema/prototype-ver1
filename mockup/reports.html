<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리포트 - Suprema T&A</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans KR', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        slate: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
        }
        .gradient-border {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 1px;
        }
        .stat-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
        }
        .kpi-card {
            background: linear-gradient(135deg, var(--from-color), var(--to-color));
        }
        .heatmap-cell {
            transition: all 0.2s ease;
        }
        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .trend-up { color: #10b981; }
        .trend-down { color: #ef4444; }
        .sparkline {
            display: inline-block;
            vertical-align: middle;
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(59, 130, 246, 0); }
        }
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .toast { animation: slideIn 0.3s ease-out; }
        .tab-indicator {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef, createContext, useContext } = React;

        // Toast Context
        const ToastContext = createContext();
        const useToast = () => useContext(ToastContext);

        const ToastProvider = ({ children }) => {
            const [toasts, setToasts] = useState([]);

            const addToast = (message, type = 'success') => {
                const id = Date.now();
                setToasts(prev => [...prev, { id, message, type }]);
                setTimeout(() => {
                    setToasts(prev => prev.filter(t => t.id !== id));
                }, 3000);
            };

            return (
                <ToastContext.Provider value={{ addToast }}>
                    {children}
                    <div className="fixed bottom-4 right-4 z-50 space-y-2">
                        {toasts.map(toast => (
                            <div key={toast.id} className={`toast px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 ${
                                toast.type === 'success' ? 'bg-green-500 text-white' :
                                toast.type === 'error' ? 'bg-red-500 text-white' : 'bg-slate-800 text-white'
                            }`}>
                                {toast.type === 'success' && (
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                    </svg>
                                )}
                                {toast.message}
                            </div>
                        ))}
                    </div>
                </ToastContext.Provider>
            );
        };

        // KPI Card Component
        const KPICard = ({ title, value, unit, trend, trendValue, icon, gradient, sparkData }) => {
            const isPositive = trend === 'up';
            const gradients = {
                blue: 'from-blue-500 to-blue-600',
                green: 'from-emerald-500 to-emerald-600',
                purple: 'from-purple-500 to-purple-600',
                amber: 'from-amber-500 to-amber-600',
                rose: 'from-rose-500 to-rose-600',
                cyan: 'from-cyan-500 to-cyan-600',
            };

            return (
                <div className={`stat-card bg-gradient-to-br ${gradients[gradient]} rounded-2xl p-6 text-white relative overflow-hidden`}>
                    <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16" />
                    <div className="absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12" />

                    <div className="relative z-10">
                        <div className="flex items-center justify-between mb-4">
                            <div className="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                                {icon}
                            </div>
                            <div className={`flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full ${
                                isPositive ? 'bg-green-400/30 text-green-100' : 'bg-red-400/30 text-red-100'
                            }`}>
                                {isPositive ? (
                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 10l7-7m0 0l7 7m-7-7v18" />
                                    </svg>
                                ) : (
                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                                    </svg>
                                )}
                                {trendValue}
                            </div>
                        </div>
                        <div className="text-3xl font-bold mb-1">{value}<span className="text-lg font-normal ml-1 opacity-80">{unit}</span></div>
                        <div className="text-white/80 text-sm">{title}</div>

                        {/* Mini Sparkline */}
                        <div className="mt-3 flex items-end gap-0.5 h-8">
                            {sparkData.map((v, i) => (
                                <div
                                    key={i}
                                    className="flex-1 bg-white/30 rounded-t"
                                    style={{ height: `${(v / Math.max(...sparkData)) * 100}%` }}
                                />
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Donut Chart Component
        const DonutChart = ({ data, title, centerValue, centerLabel }) => {
            const total = data.reduce((sum, d) => sum + d.value, 0);
            let cumulativePercent = 0;

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h3 className="text-lg font-semibold text-slate-800 mb-4">{title}</h3>
                    <div className="flex items-center gap-6">
                        <div className="relative w-40 h-40">
                            <svg viewBox="0 0 100 100" className="transform -rotate-90">
                                {data.map((item, index) => {
                                    const percent = (item.value / total) * 100;
                                    const dashArray = `${percent} ${100 - percent}`;
                                    const dashOffset = -cumulativePercent;
                                    cumulativePercent += percent;

                                    return (
                                        <circle
                                            key={index}
                                            cx="50"
                                            cy="50"
                                            r="40"
                                            fill="transparent"
                                            stroke={item.color}
                                            strokeWidth="12"
                                            strokeDasharray={dashArray}
                                            strokeDashoffset={dashOffset}
                                            className="transition-all duration-500"
                                        />
                                    );
                                })}
                            </svg>
                            <div className="absolute inset-0 flex flex-col items-center justify-center">
                                <span className="text-2xl font-bold text-slate-800">{centerValue}</span>
                                <span className="text-xs text-slate-500">{centerLabel}</span>
                            </div>
                        </div>
                        <div className="flex-1 space-y-2">
                            {data.map((item, index) => (
                                <div key={index} className="flex items-center justify-between">
                                    <div className="flex items-center gap-2">
                                        <div className="w-3 h-3 rounded-full" style={{ backgroundColor: item.color }} />
                                        <span className="text-sm text-slate-600">{item.label}</span>
                                    </div>
                                    <div className="text-right">
                                        <span className="font-semibold text-slate-800">{item.value}</span>
                                        <span className="text-xs text-slate-400 ml-1">({((item.value / total) * 100).toFixed(1)}%)</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Heatmap Component
        const Heatmap = ({ data, title }) => {
            const maxValue = Math.max(...data.flat());
            const getColor = (value) => {
                const intensity = value / maxValue;
                if (intensity === 0) return 'bg-slate-100';
                if (intensity < 0.25) return 'bg-blue-100';
                if (intensity < 0.5) return 'bg-blue-300';
                if (intensity < 0.75) return 'bg-blue-500';
                return 'bg-blue-700';
            };

            const hours = Array.from({ length: 12 }, (_, i) => `${8 + i}시`);
            const days = ['월', '화', '수', '목', '금'];

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h3 className="text-lg font-semibold text-slate-800 mb-4">{title}</h3>
                    <div className="overflow-x-auto">
                        <div className="inline-block min-w-full">
                            {/* Hours Header */}
                            <div className="flex mb-2">
                                <div className="w-12" />
                                {hours.map((hour, i) => (
                                    <div key={i} className="flex-1 text-center text-xs text-slate-500 min-w-[40px]">{hour}</div>
                                ))}
                            </div>
                            {/* Heatmap Grid */}
                            {data.map((row, dayIndex) => (
                                <div key={dayIndex} className="flex items-center mb-1">
                                    <div className="w-12 text-sm text-slate-600 font-medium">{days[dayIndex]}</div>
                                    {row.map((value, hourIndex) => (
                                        <div
                                            key={hourIndex}
                                            className={`heatmap-cell flex-1 h-8 min-w-[40px] mx-0.5 rounded ${getColor(value)} cursor-pointer flex items-center justify-center text-xs font-medium ${value > maxValue * 0.5 ? 'text-white' : 'text-slate-600'}`}
                                            title={`${days[dayIndex]} ${hours[hourIndex]}: ${value}명`}
                                        >
                                            {value > 0 && value}
                                        </div>
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                    {/* Legend */}
                    <div className="flex items-center justify-center gap-2 mt-4 text-xs">
                        <span className="text-slate-500">적음</span>
                        <div className="flex gap-1">
                            {['bg-slate-100', 'bg-blue-100', 'bg-blue-300', 'bg-blue-500', 'bg-blue-700'].map((color, i) => (
                                <div key={i} className={`w-6 h-4 rounded ${color}`} />
                            ))}
                        </div>
                        <span className="text-slate-500">많음</span>
                    </div>
                </div>
            );
        };

        // Bar Chart Component
        const BarChart = ({ data, title, subtitle }) => {
            const maxValue = Math.max(...data.map(d => d.value));

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <div className="flex items-center justify-between mb-6">
                        <div>
                            <h3 className="text-lg font-semibold text-slate-800">{title}</h3>
                            {subtitle && <p className="text-sm text-slate-500">{subtitle}</p>}
                        </div>
                    </div>
                    <div className="space-y-4">
                        {data.map((item, index) => (
                            <div key={index}>
                                <div className="flex items-center justify-between mb-1">
                                    <span className="text-sm font-medium text-slate-700">{item.label}</span>
                                    <span className="text-sm text-slate-500">{item.value}{item.unit || ''}</span>
                                </div>
                                <div className="h-3 bg-slate-100 rounded-full overflow-hidden">
                                    <div
                                        className={`h-full rounded-full transition-all duration-700 ${item.color || 'bg-blue-500'}`}
                                        style={{ width: `${(item.value / maxValue) * 100}%` }}
                                    />
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Trend Line Chart (Simple SVG)
        const TrendChart = ({ data, title, labels }) => {
            const maxValue = Math.max(...data);
            const minValue = Math.min(...data);
            const range = maxValue - minValue || 1;
            const points = data.map((v, i) => ({
                x: (i / (data.length - 1)) * 100,
                y: 100 - ((v - minValue) / range) * 80 - 10
            }));

            const pathD = points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`).join(' ');
            const areaD = `${pathD} L 100 100 L 0 100 Z`;

            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h3 className="text-lg font-semibold text-slate-800 mb-4">{title}</h3>
                    <div className="relative h-48">
                        <svg viewBox="0 0 100 100" className="w-full h-full" preserveAspectRatio="none">
                            {/* Grid Lines */}
                            {[0, 25, 50, 75, 100].map(y => (
                                <line key={y} x1="0" y1={y} x2="100" y2={y} stroke="#e2e8f0" strokeWidth="0.5" />
                            ))}
                            {/* Area Fill */}
                            <path d={areaD} fill="url(#gradient)" opacity="0.3" />
                            {/* Line */}
                            <path d={pathD} fill="none" stroke="#3b82f6" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                            {/* Points */}
                            {points.map((p, i) => (
                                <circle key={i} cx={p.x} cy={p.y} r="3" fill="#3b82f6" className="cursor-pointer hover:r-4" />
                            ))}
                            <defs>
                                <linearGradient id="gradient" x1="0" y1="0" x2="0" y2="1">
                                    <stop offset="0%" stopColor="#3b82f6" />
                                    <stop offset="100%" stopColor="#3b82f6" stopOpacity="0" />
                                </linearGradient>
                            </defs>
                        </svg>
                        {/* X-axis Labels */}
                        <div className="absolute bottom-0 left-0 right-0 flex justify-between text-xs text-slate-400 -mb-5">
                            {labels.map((label, i) => (
                                <span key={i}>{label}</span>
                            ))}
                        </div>
                    </div>
                    {/* Stats */}
                    <div className="grid grid-cols-3 gap-4 mt-8 pt-4 border-t border-slate-100">
                        <div className="text-center">
                            <div className="text-lg font-bold text-slate-800">{Math.round(data.reduce((a, b) => a + b, 0) / data.length)}</div>
                            <div className="text-xs text-slate-500">평균</div>
                        </div>
                        <div className="text-center">
                            <div className="text-lg font-bold text-emerald-600">{maxValue}</div>
                            <div className="text-xs text-slate-500">최대</div>
                        </div>
                        <div className="text-center">
                            <div className="text-lg font-bold text-amber-600">{minValue}</div>
                            <div className="text-xs text-slate-500">최소</div>
                        </div>
                    </div>
                </div>
            );
        };

        // Data Table Component
        const DataTable = ({ data, columns, title, onExport }) => {
            const [sortBy, setSortBy] = useState(null);
            const [sortDir, setSortDir] = useState('asc');

            const sortedData = [...data].sort((a, b) => {
                if (!sortBy) return 0;
                const aVal = a[sortBy];
                const bVal = b[sortBy];
                return sortDir === 'asc' ? (aVal > bVal ? 1 : -1) : (aVal < bVal ? 1 : -1);
            });

            const handleSort = (key) => {
                if (sortBy === key) {
                    setSortDir(sortDir === 'asc' ? 'desc' : 'asc');
                } else {
                    setSortBy(key);
                    setSortDir('asc');
                }
            };

            return (
                <div className="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                    <div className="p-4 border-b border-slate-100 flex items-center justify-between">
                        <h3 className="text-lg font-semibold text-slate-800">{title}</h3>
                        <button
                            onClick={onExport}
                            className="px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center gap-2"
                        >
                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            엑셀 다운로드
                        </button>
                    </div>
                    <div className="overflow-x-auto">
                        <table className="w-full">
                            <thead>
                                <tr className="bg-slate-50">
                                    {columns.map((col) => (
                                        <th
                                            key={col.key}
                                            onClick={() => handleSort(col.key)}
                                            className="px-4 py-3 text-left text-sm font-semibold text-slate-600 cursor-pointer hover:bg-slate-100 transition-colors"
                                        >
                                            <div className="flex items-center gap-1">
                                                {col.label}
                                                {sortBy === col.key && (
                                                    <svg className={`w-4 h-4 transition-transform ${sortDir === 'desc' ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" />
                                                    </svg>
                                                )}
                                            </div>
                                        </th>
                                    ))}
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-100">
                                {sortedData.map((row, idx) => (
                                    <tr key={idx} className="hover:bg-slate-50 transition-colors">
                                        {columns.map((col) => (
                                            <td key={col.key} className="px-4 py-3 text-sm text-slate-700">
                                                {col.render ? col.render(row[col.key], row) : row[col.key]}
                                            </td>
                                        ))}
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        // Main Reports Component
        const Reports = () => {
            const toast = useToast();
            const [activeTab, setActiveTab] = useState('overview');
            const [dateRange, setDateRange] = useState('week');
            const [customStartDate, setCustomStartDate] = useState('2026-01-01');
            const [customEndDate, setCustomEndDate] = useState('2026-01-31');
            const [showDatePicker, setShowDatePicker] = useState(false);

            // KPI Data
            const kpiData = [
                {
                    title: '총 근무시간',
                    value: '4,280',
                    unit: 'h',
                    trend: 'up',
                    trendValue: '+3.2%',
                    gradient: 'blue',
                    sparkData: [65, 70, 68, 75, 72, 80, 78],
                    icon: <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                },
                {
                    title: '평균 출근율',
                    value: '94.2',
                    unit: '%',
                    trend: 'up',
                    trendValue: '+1.5%',
                    gradient: 'green',
                    sparkData: [88, 92, 91, 95, 93, 94, 94],
                    icon: <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                },
                {
                    title: '연장근무',
                    value: '186',
                    unit: 'h',
                    trend: 'down',
                    trendValue: '-8.4%',
                    gradient: 'amber',
                    sparkData: [45, 42, 38, 40, 35, 32, 34],
                    icon: <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                },
                {
                    title: '휴가 사용률',
                    value: '68.5',
                    unit: '%',
                    trend: 'up',
                    trendValue: '+5.2%',
                    gradient: 'purple',
                    sparkData: [55, 58, 62, 60, 65, 67, 68],
                    icon: <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                },
                {
                    title: '지각률',
                    value: '2.3',
                    unit: '%',
                    trend: 'down',
                    trendValue: '-0.8%',
                    gradient: 'rose',
                    sparkData: [4, 3.5, 3.2, 3, 2.8, 2.5, 2.3],
                    icon: <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                },
                {
                    title: '52시간 위험',
                    value: '3',
                    unit: '명',
                    trend: 'down',
                    trendValue: '-2명',
                    gradient: 'cyan',
                    sparkData: [8, 7, 6, 5, 4, 4, 3],
                    icon: <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" /></svg>
                },
            ];

            // Donut Chart Data
            const attendanceDistribution = [
                { label: '정상 출근', value: 245, color: '#10b981' },
                { label: '지각', value: 8, color: '#ef4444' },
                { label: '휴가', value: 15, color: '#8b5cf6' },
                { label: '연장근무', value: 32, color: '#f59e0b' },
            ];

            // Heatmap Data (5 days x 12 hours)
            const heatmapData = [
                [12, 28, 45, 52, 48, 42, 38, 35, 40, 45, 38, 25],
                [15, 32, 48, 55, 52, 45, 40, 38, 42, 48, 35, 22],
                [10, 25, 42, 50, 48, 40, 36, 32, 38, 42, 32, 20],
                [18, 35, 50, 58, 55, 48, 42, 40, 45, 50, 40, 28],
                [8, 22, 38, 45, 42, 38, 32, 28, 35, 40, 30, 18],
            ];

            // Trend Data
            const weeklyTrend = [42, 45, 43, 48, 46, 44, 47];
            const trendLabels = ['월', '화', '수', '목', '금', '토', '일'];

            // Table Data
            const employeeData = [
                { name: '김철수', dept: '개발1팀', position: '선임', workHours: '168h', overtime: '12h', attendance: '100%', status: 'normal' },
                { name: '이영희', dept: '개발1팀', position: '책임', workHours: '172h', overtime: '16h', attendance: '95%', status: 'warning' },
                { name: '박민수', dept: '개발2팀', position: '사원', workHours: '160h', overtime: '4h', attendance: '100%', status: 'normal' },
                { name: '정수진', dept: '디자인팀', position: '선임', workHours: '165h', overtime: '8h', attendance: '90%', status: 'normal' },
                { name: '최준혁', dept: '개발1팀', position: '책임', workHours: '180h', overtime: '24h', attendance: '100%', status: 'danger' },
                { name: '한미래', dept: '마케팅팀', position: '사원', workHours: '158h', overtime: '2h', attendance: '95%', status: 'normal' },
            ];

            const tableColumns = [
                { key: 'name', label: '이름' },
                { key: 'dept', label: '부서' },
                { key: 'position', label: '직급' },
                { key: 'workHours', label: '근무시간' },
                { key: 'overtime', label: '연장근무' },
                { key: 'attendance', label: '출근율' },
                {
                    key: 'status',
                    label: '상태',
                    render: (value) => {
                        const colors = {
                            normal: 'bg-green-100 text-green-700',
                            warning: 'bg-amber-100 text-amber-700',
                            danger: 'bg-red-100 text-red-700',
                        };
                        const labels = { normal: '정상', warning: '주의', danger: '위험' };
                        return (
                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${colors[value]}`}>
                                {labels[value]}
                            </span>
                        );
                    }
                },
            ];

            const handleExportExcel = () => {
                const data = [
                    ['이름', '부서', '직급', '근무시간', '연장근무', '출근율', '상태'],
                    ...employeeData.map(e => [e.name, e.dept, e.position, e.workHours, e.overtime, e.attendance, e.status === 'normal' ? '정상' : e.status === 'warning' ? '주의' : '위험'])
                ];
                const ws = XLSX.utils.aoa_to_sheet(data);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, '리포트');
                XLSX.writeFile(wb, `근태리포트_${new Date().toISOString().split('T')[0]}.xlsx`);
                toast.addToast('엑셀 파일이 다운로드되었습니다.', 'success');
            };

            const tabs = [
                { id: 'overview', label: '개요', icon: <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg> },
                { id: 'attendance', label: '출퇴근 분석', icon: <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg> },
                { id: 'overtime', label: '연장근무', icon: <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg> },
                { id: 'leave', label: '휴가 현황', icon: <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg> },
                { id: 'employee', label: '개인별 분석', icon: <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg> },
            ];

            return (
                <div className="max-w-7xl mx-auto p-6">
                    {/* Header */}
                    <div className="flex items-center justify-between mb-8">
                        <div>
                            <h1 className="text-2xl font-bold text-slate-800">리포트 & 분석</h1>
                            <p className="text-slate-500">근태 데이터 기반 인사이트</p>
                        </div>
                        <div className="flex items-center gap-3">
                            {/* Date Range Selector */}
                            <div className="flex bg-slate-100 rounded-xl p-1">
                                {['week', 'month', 'quarter', 'year'].map((range) => (
                                    <button
                                        key={range}
                                        onClick={() => { setDateRange(range); setShowDatePicker(false); }}
                                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${
                                            dateRange === range && !showDatePicker ? 'bg-white text-slate-800 shadow-sm' : 'text-slate-600 hover:text-slate-800'
                                        }`}
                                    >
                                        {range === 'week' ? '주간' : range === 'month' ? '월간' : range === 'quarter' ? '분기' : '연간'}
                                    </button>
                                ))}
                                <button
                                    onClick={() => setShowDatePicker(!showDatePicker)}
                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-1 ${
                                        showDatePicker ? 'bg-white text-slate-800 shadow-sm' : 'text-slate-600 hover:text-slate-800'
                                    }`}
                                >
                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    직접선택
                                </button>
                            </div>

                            {/* Custom Date Picker */}
                            {showDatePicker && (
                                <div className="flex items-center gap-2 bg-white border border-slate-200 rounded-xl px-3 py-1.5">
                                    <input
                                        type="date"
                                        value={customStartDate}
                                        onChange={(e) => setCustomStartDate(e.target.value)}
                                        className="px-2 py-1 text-sm border-0 bg-transparent focus:outline-none focus:ring-0 text-slate-700"
                                    />
                                    <span className="text-slate-400">~</span>
                                    <input
                                        type="date"
                                        value={customEndDate}
                                        onChange={(e) => setCustomEndDate(e.target.value)}
                                        className="px-2 py-1 text-sm border-0 bg-transparent focus:outline-none focus:ring-0 text-slate-700"
                                    />
                                    <button
                                        onClick={() => {
                                            if (new Date(customStartDate) > new Date(customEndDate)) {
                                                toast.addToast('시작일이 종료일보다 클 수 없습니다.', 'error');
                                                return;
                                            }
                                            toast.addToast(`${customStartDate} ~ ${customEndDate} 기간 데이터를 조회합니다.`, 'success');
                                        }}
                                        className="px-3 py-1 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors"
                                    >
                                        조회
                                    </button>
                                </div>
                            )}
                            {/* Department Title */}
                            <div className="px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-700 font-medium">
                                개발팀
                            </div>
                            {/* Export Button */}
                            <button
                                onClick={handleExportExcel}
                                className="px-4 py-2 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center gap-2"
                            >
                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                </svg>
                                리포트 다운로드
                            </button>
                        </div>
                    </div>

                    {/* Tabs */}
                    <div className="bg-white rounded-2xl shadow-sm border border-slate-100 mb-6">
                        <div className="flex border-b border-slate-100">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-6 py-4 font-medium transition-all relative ${
                                        activeTab === tab.id ? 'text-blue-600' : 'text-slate-500 hover:text-slate-700'
                                    }`}
                                >
                                    {tab.icon}
                                    {tab.label}
                                    {activeTab === tab.id && (
                                        <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 tab-indicator" />
                                    )}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Tab Content */}
                    {activeTab === 'overview' && (
                        <>
                            {/* KPI Cards */}
                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6">
                                {kpiData.map((kpi, idx) => (
                                    <KPICard key={idx} {...kpi} />
                                ))}
                            </div>

                            {/* Main Content */}
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                                <DonutChart
                                    data={attendanceDistribution}
                                    title="출퇴근 분포"
                                    centerValue="300"
                                    centerLabel="총 인원"
                                />
                                <TrendChart
                                    data={weeklyTrend}
                                    title="주간 출근 인원 추이"
                                    labels={trendLabels}
                                />
                            </div>

                            {/* Heatmap */}
                            <div className="mb-6">
                                <Heatmap
                                    data={heatmapData}
                                    title="시간대별 출근 인원 히트맵"
                                />
                            </div>

                            {/* Data Table */}
                            <DataTable
                                data={employeeData}
                                columns={tableColumns}
                                title="직원별 근태 현황"
                                onExport={handleExportExcel}
                            />
                        </>
                    )}

                    {activeTab === 'attendance' && (
                        <div className="space-y-6">
                            {/* 출퇴근 분석 KPI */}
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500 mb-1">평균 출근 시간</div>
                                    <div className="text-3xl font-bold text-slate-800">08:42</div>
                                    <div className="text-xs text-green-600 mt-1">정시 출근율 94%</div>
                                </div>
                                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500 mb-1">평균 퇴근 시간</div>
                                    <div className="text-3xl font-bold text-slate-800">18:15</div>
                                    <div className="text-xs text-amber-600 mt-1">연장근무 포함</div>
                                </div>
                                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500 mb-1">지각 건수</div>
                                    <div className="text-3xl font-bold text-red-600">8</div>
                                    <div className="text-xs text-slate-500 mt-1">이번 주 기준</div>
                                </div>
                                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500 mb-1">조기퇴근</div>
                                    <div className="text-3xl font-bold text-amber-600">3</div>
                                    <div className="text-xs text-slate-500 mt-1">이번 주 기준</div>
                                </div>
                            </div>

                            {/* 히트맵 */}
                            <Heatmap data={heatmapData} title="시간대별 출퇴근 패턴 히트맵" />

                            {/* 지각자 명단 */}
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                <h3 className="text-lg font-semibold text-slate-800 mb-4">이번 주 지각자 현황</h3>
                                <div className="space-y-3">
                                    {[
                                        { name: '정수진', dept: '개발1팀', date: '01/27', time: '09:15', delay: '15분' },
                                        { name: '한미래', dept: '마케팅팀', date: '01/26', time: '09:22', delay: '22분' },
                                        { name: '윤서준', dept: '디자인팀', date: '01/25', time: '09:08', delay: '8분' },
                                    ].map((item, idx) => (
                                        <div key={idx} className="flex items-center justify-between p-4 bg-red-50 rounded-xl border border-red-100">
                                            <div className="flex items-center gap-3">
                                                <div className="w-10 h-10 bg-red-200 rounded-full flex items-center justify-center text-red-700 font-semibold">{item.name[0]}</div>
                                                <div>
                                                    <div className="font-medium text-slate-800">{item.name}</div>
                                                    <div className="text-xs text-slate-500">{item.dept} · {item.date}</div>
                                                </div>
                                            </div>
                                            <div className="text-right">
                                                <div className="font-semibold text-red-600">{item.time}</div>
                                                <div className="text-xs text-slate-500">{item.delay} 지각</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'overtime' && (
                        <div className="space-y-6">
                            {/* 연장근무 경고 배너 */}
                            <div className="p-4 bg-red-50 border border-red-200 rounded-2xl flex items-center gap-4">
                                <div className="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center text-2xl">⚠️</div>
                                <div className="flex-1">
                                    <div className="font-semibold text-red-800">52시간 초과 위험 경고</div>
                                    <div className="text-sm text-red-600">3명이 주 52시간 한도의 90% 이상을 사용했습니다.</div>
                                </div>
                                <button className="px-4 py-2 bg-red-600 text-white rounded-xl text-sm font-medium hover:bg-red-700">상세 보기</button>
                            </div>

                            {/* 52시간 모니터링 */}
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                <h3 className="text-lg font-semibold text-slate-800 mb-4">52시간 모니터링</h3>
                                <div className="space-y-4">
                                    {[
                                        { name: '최준혁', dept: '개발1팀', hours: 49.5, status: 'danger' },
                                        { name: '이영희', dept: '개발1팀', hours: 47.0, status: 'warning' },
                                        { name: '김철수', dept: '개발1팀', hours: 45.5, status: 'warning' },
                                        { name: '송지은', dept: '개발2팀', hours: 38.0, status: 'normal' },
                                    ].map((person, idx) => (
                                        <div key={idx} className={`p-4 rounded-xl border-l-4 ${person.status === 'danger' ? 'bg-red-50 border-red-500' : person.status === 'warning' ? 'bg-amber-50 border-amber-500' : 'bg-green-50 border-green-500'}`}>
                                            <div className="flex items-center justify-between mb-2">
                                                <div className="flex items-center gap-3">
                                                    <div className="font-medium text-slate-800">{person.name}</div>
                                                    <span className="text-xs text-slate-500">{person.dept}</span>
                                                </div>
                                                <div className={`font-bold ${person.status === 'danger' ? 'text-red-600' : person.status === 'warning' ? 'text-amber-600' : 'text-slate-800'}`}>{person.hours}h / 52h</div>
                                            </div>
                                            <div className="h-2 bg-slate-200 rounded-full overflow-hidden">
                                                <div className={`h-full rounded-full ${person.status === 'danger' ? 'bg-red-500' : person.status === 'warning' ? 'bg-amber-500' : 'bg-green-500'}`} style={{ width: `${(person.hours / 52) * 100}%` }} />
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === 'leave' && (
                        <div className="space-y-6">
                            {/* 휴가 요약 */}
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div className="bg-blue-50 rounded-2xl p-6 border border-blue-100">
                                    <div className="text-sm text-blue-600 mb-1">전체 부여 휴가</div>
                                    <div className="text-3xl font-bold text-blue-700">1,800일</div>
                                    <div className="text-xs text-blue-500 mt-1">전 직원 기준</div>
                                </div>
                                <div className="bg-purple-50 rounded-2xl p-6 border border-purple-100">
                                    <div className="text-sm text-purple-600 mb-1">사용 휴가</div>
                                    <div className="text-3xl font-bold text-purple-700">1,232일</div>
                                    <div className="text-xs text-purple-500 mt-1">68.4% 소진</div>
                                </div>
                                <div className="bg-amber-50 rounded-2xl p-6 border border-amber-100">
                                    <div className="text-sm text-amber-600 mb-1">잔여 휴가</div>
                                    <div className="text-3xl font-bold text-amber-700">568일</div>
                                    <div className="text-xs text-amber-500 mt-1">연말 소진 권장</div>
                                </div>
                                <div className="bg-green-50 rounded-2xl p-6 border border-green-100">
                                    <div className="text-sm text-green-600 mb-1">승인 대기</div>
                                    <div className="text-3xl font-bold text-green-700">12건</div>
                                    <div className="text-xs text-green-500 mt-1">휴가 신청</div>
                                </div>
                            </div>

                            {/* 부서별 휴가 사용률 */}
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                <h3 className="text-lg font-semibold text-slate-800 mb-4">부서별 휴가 사용률</h3>
                                <div className="space-y-4">
                                    {[
                                        { name: '개발1팀', used: 78, total: 100 },
                                        { name: '개발2팀', used: 65, total: 88 },
                                        { name: '디자인팀', used: 52, total: 60 },
                                        { name: '마케팅팀', used: 48, total: 80 },
                                        { name: '영업팀', used: 55, total: 112 },
                                    ].map((dept, idx) => {
                                        const rate = Math.round((dept.used / dept.total) * 100);
                                        return (
                                            <div key={idx}>
                                                <div className="flex justify-between text-sm mb-1">
                                                    <span className="text-slate-600">{dept.name}</span>
                                                    <span className={`font-semibold ${rate >= 70 ? 'text-green-600' : rate >= 50 ? 'text-amber-600' : 'text-red-600'}`}>{rate}% ({dept.used}/{dept.total}일)</span>
                                                </div>
                                                <div className="h-3 bg-slate-100 rounded-full overflow-hidden">
                                                    <div className={`h-full rounded-full ${rate >= 70 ? 'bg-green-500' : rate >= 50 ? 'bg-amber-500' : 'bg-red-500'}`} style={{ width: `${rate}%` }} />
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* 휴가 유형별 분포 */}
                            <DonutChart
                                data={[
                                    { label: '연차', value: 850, color: '#8b5cf6' },
                                    { label: '반차', value: 220, color: '#a78bfa' },
                                    { label: '병가', value: 65, color: '#10b981' },
                                    { label: '경조사', value: 45, color: '#f59e0b' },
                                    { label: '공가', value: 32, color: '#6366f1' },
                                ]}
                                title="휴가 유형별 분포"
                                centerValue="1,212"
                                centerLabel="총 사용일"
                            />
                        </div>
                    )}

                    {activeTab === 'employee' && (
                        <div className="space-y-6">
                            {/* 직원 선택 */}
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                <div className="flex items-center gap-4">
                                    <label className="text-sm font-medium text-slate-700">직원 선택:</label>
                                    <select className="px-4 py-2 bg-slate-100 border-0 rounded-xl text-slate-700 focus:ring-2 focus:ring-blue-500">
                                        <option>김호준 (개발1팀)</option>
                                        <option>김철수 (개발1팀)</option>
                                        <option>이영희 (개발1팀)</option>
                                        <option>박민수 (개발2팀)</option>
                                    </select>
                                </div>
                            </div>

                            {/* 개인 프로필 카드 */}
                            <div className="bg-gradient-to-r from-blue-600 to-blue-800 rounded-2xl p-6 text-white relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-20 translate-x-20" />
                                <div className="relative z-10 flex items-center gap-6">
                                    <div className="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center text-3xl font-bold">김</div>
                                    <div className="flex-1">
                                        <h2 className="text-2xl font-bold">김호준</h2>
                                        <p className="text-blue-100">개발1팀 · 선임</p>
                                        <p className="text-blue-200 text-sm mt-1">사번: EMP-2024-0127</p>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-blue-100 text-sm">입사일</div>
                                        <div className="font-semibold">2022-03-15</div>
                                    </div>
                                </div>
                            </div>

                            {/* 개인 KPI */}
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500">이번 달 근무시간</div>
                                    <div className="text-2xl font-bold text-slate-800 mt-1">168h</div>
                                    <div className="text-xs text-green-600">목표 대비 100%</div>
                                </div>
                                <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500">출근율</div>
                                    <div className="text-2xl font-bold text-slate-800 mt-1">100%</div>
                                    <div className="text-xs text-green-600">팀 평균 96%</div>
                                </div>
                                <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500">잔여 연차</div>
                                    <div className="text-2xl font-bold text-slate-800 mt-1">7일</div>
                                    <div className="text-xs text-slate-500">15일 중</div>
                                </div>
                                <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-100">
                                    <div className="text-sm text-slate-500">연장근무</div>
                                    <div className="text-2xl font-bold text-amber-600 mt-1">8h</div>
                                    <div className="text-xs text-slate-500">주간 12h 한도</div>
                                </div>
                            </div>

                            {/* 월간 근무시간 추이 */}
                            <TrendChart
                                data={[176, 168, 184, 160, 172, 168]}
                                title="월간 근무시간 추이"
                                labels={['8월', '9월', '10월', '11월', '12월', '1월']}
                            />

                            {/* 팀 내 비교 */}
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                                <h3 className="text-lg font-semibold text-slate-800 mb-4">팀 내 근태 점수 순위</h3>
                                <div className="space-y-3">
                                    {[
                                        { rank: 1, name: '이영희', score: 98 },
                                        { rank: 2, name: '김호준', score: 95, isMe: true },
                                        { rank: 3, name: '김철수', score: 92 },
                                        { rank: 4, name: '정수진', score: 88 },
                                    ].map((person, idx) => (
                                        <div key={idx} className={`flex items-center gap-4 p-3 rounded-xl ${person.isMe ? 'bg-blue-50 border border-blue-200' : 'bg-slate-50'}`}>
                                            <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${person.rank === 1 ? 'bg-amber-400 text-white' : person.rank === 2 ? 'bg-slate-300 text-white' : person.rank === 3 ? 'bg-amber-600 text-white' : 'bg-slate-200 text-slate-600'}`}>
                                                {person.rank}
                                            </div>
                                            <div className="flex-1 font-medium text-slate-800">{person.name}</div>
                                            <div className="font-bold text-slate-800">{person.score}점</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer Info */}
                    <div className="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-100">
                        <div className="flex items-center gap-2 text-sm text-blue-700">
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span>데이터 기준: 2026년 1월 27일 16:00 업데이트 | 자동 새로고침: 30분마다</span>
                        </div>
                    </div>
                </div>
            );
        };

        // Sidebar Icons
        const SIcons = {
            Home: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>,
            Clock: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
            Document: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
            Chart: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>,
            Settings: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
            Bell: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>,
            Users: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
            Plane: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>,
Island: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 4c2-1 5-1 7 1-2 0-4 1-5 3m-2-4c-2-1-5-1-7 1 2 0 4 1 5 3" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 8c0 4-1 8-2 12" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 20c2-2 5-3 8-3s6 1 8 3" /></svg>,
Timer: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 21a9 9 0 100-18 9 9 0 000 18z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 1h6M12 1v2" /></svg>,
            Clipboard: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>,
            Building: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>,
            Menu: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" /></svg>,
            Search: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>,
        };

        const AppSidebar = ({ collapsed, setCollapsed, mode }) => {
            const empItems = [
                { id:'dashboard', icon:<SIcons.Home />, label:'대시보드', page:'emp-index.html' },
                { id:'attendance', icon:<SIcons.Clock />, label:'출퇴근 기록', page:'emp-attendance-records.html' },
                { id:'leave', icon:<SIcons.Island />, label:'휴가관리', page:'emp-leave-management.html' },
                { id:'overtime', icon:<SIcons.Timer />, label:'연장/휴일 근무', page:'emp-overtime-management.html' },
                { id:'team', icon:<SIcons.Users />, label:'팀 근무 관리', page:'team-management.html?mode=employee' },
                { id:'reports', icon:<SIcons.Chart />, label:'리포트', page:null },
                { id:'settings', icon:<SIcons.Settings />, label:'설정', page:'settings.html?mode=employee' },
            ];
            const hrItems = [
                { id:'dashboard', icon:<SIcons.Home />, label:'대시보드', page:'index.html' },
                { id:'attendance', icon:<SIcons.Clock />, label:'출퇴근 기록', page:'attendance-records.html' },
                { id:'leave', icon:<SIcons.Island />, label:'휴가 관리', page:'leave-management.html' },
                { id: 'overtime', icon: <SIcons.Timer />, label: '연장/휴일근무', page: 'overtime-management.html' },
                { id:'requests', icon:<SIcons.Clipboard />, label:'요청 관리', page:'requests-management.html' },
                { id:'management', icon:<SIcons.Building />, label:'근무 규칙 관리', page:'management.html' },
                { id:'company', icon:<SIcons.Building />, label:'회사 규칙', page:'company-settings.html' },
                { id:'reports', icon:<SIcons.Chart />, label:'리포트', page:null },
                { id:'settings', icon:<SIcons.Settings />, label:'설정', page:'settings.html?mode=hr' },
            ];
            const menuItems = mode === 'employee' ? empItems : hrItems;
            const homePage = mode === 'employee' ? 'emp-index.html' : 'index.html';
            return (
                <aside className={`fixed left-0 top-0 h-full bg-white border-r border-slate-200 transition-all duration-300 z-40 ${collapsed?'w-20':'w-64'}`}>
                    <div className="h-16 flex items-center justify-between px-4 border-b border-slate-100">
                        {!collapsed && <a href={homePage} className="flex items-center gap-3"><div className="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center"><span className="text-white font-bold text-sm">S</span></div><span className="font-bold text-slate-800">Suprema T&A</span></a>}
                        <button onClick={()=>setCollapsed(!collapsed)} className="p-2 hover:bg-slate-100 rounded-lg transition-colors"><SIcons.Menu /></button>
                    </div>
                    <nav className="p-3 space-y-1">
                        {menuItems.map(item=>(
                            <button key={item.id} onClick={()=>{if(item.page) window.location.href=item.page;}}
                                className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ${item.id==='reports'?'bg-primary-50 text-primary-600':'text-slate-600 hover:text-slate-800 hover:bg-slate-50'}`}>
                                <span className={item.id==='reports'?'text-primary-600':'text-slate-400'}>{item.icon}</span>
                                {!collapsed && <span className="font-medium flex-1">{item.label}</span>}
                            </button>
                        ))}
                    </nav>
                </aside>
            );
        };

        const AppHeader = ({ collapsed, mode, setMode }) => (
            <header className={`fixed top-0 right-0 h-16 bg-white/80 backdrop-blur-lg border-b border-slate-100 z-30 transition-all duration-300 ${collapsed?'left-20':'left-64'}`}>
                <div className="h-full px-6 flex items-center justify-end">
                    <div className="flex items-center gap-4">
                        <div className="flex bg-slate-100 rounded-xl p-1">
                            <button onClick={()=>setMode('employee')} className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${mode==='employee'?'bg-white text-primary-600 shadow-sm':'text-slate-600 hover:text-slate-800'}`}>직원</button>
                            <button onClick={()=>setMode('hr')} className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${mode==='hr'?'bg-white text-primary-600 shadow-sm':'text-slate-600 hover:text-slate-800'}`}>HR 관리자</button>
                        </div>
                        <button className="relative p-2 hover:bg-slate-100 rounded-xl transition-colors">
                            <SIcons.Bell />
                            <span className="absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">2</span>
                        </button>
                    </div>
                </div>
            </header>
        );

        const App = () => {
            const params = new URLSearchParams(window.location.search);
            const [mode, setModeState] = useState(params.get('mode') || 'hr');
            const [collapsed, setCollapsed] = useState(false);
            const setMode = (m) => {
                window.location.href = m === 'employee' ? 'emp-index.html' : 'index.html';
            };
            return (
                <ToastProvider>
                    <div className="min-h-screen bg-slate-50">
                        <AppSidebar collapsed={collapsed} setCollapsed={setCollapsed} mode={mode} />
                        <AppHeader collapsed={collapsed} mode={mode} setMode={setMode} />
                        <main className={`pt-16 transition-all duration-300 ${collapsed?'ml-20':'ml-64'}`}>
                            <div className="p-6"><Reports /></div>
                        </main>
                    </div>
                </ToastProvider>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
