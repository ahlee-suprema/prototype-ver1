<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í∞úÏù∏Î≥Ñ Î∂ÑÏÑù</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }</style>
</head>
<body class="bg-slate-50 p-6">
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // Í∞úÏù∏ ÏÑ†ÌÉù ÎìúÎ°≠Îã§Ïö¥
        const EmployeeSelector = ({ employees, selected, onSelect }) => (
            <select
                value={selected}
                onChange={(e) => onSelect(e.target.value)}
                className="px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
                {employees.map(emp => (
                    <option key={emp.id} value={emp.id}>{emp.name} ({emp.dept})</option>
                ))}
            </select>
        );

        // Í∞úÏù∏ ÌîÑÎ°úÌïÑ Ïπ¥Îìú
        const ProfileCard = ({ employee }) => (
            <div className="bg-gradient-to-r from-blue-600 to-blue-800 rounded-2xl p-6 text-white relative overflow-hidden">
                <div className="absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-20 translate-x-20" />
                <div className="relative z-10 flex items-center gap-6">
                    <div className="w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center text-3xl font-bold">{employee.name[0]}</div>
                    <div className="flex-1">
                        <h2 className="text-2xl font-bold">{employee.name}</h2>
                        <p className="text-blue-100">{employee.dept} ¬∑ {employee.position}</p>
                        <p className="text-blue-200 text-sm mt-1">ÏÇ¨Î≤à: {employee.empNo}</p>
                    </div>
                    <div className="text-right">
                        <div className="text-blue-100 text-sm">ÏûÖÏÇ¨Ïùº</div>
                        <div className="font-semibold">{employee.joinDate}</div>
                    </div>
                </div>
            </div>
        );

        // Í∞úÏù∏ KPI Ïπ¥Îìú
        const PersonalKPI = ({ data }) => (
            <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                {data.map((kpi, idx) => (
                    <div key={idx} className="bg-white rounded-2xl p-5 shadow-sm border border-slate-100">
                        <div className="flex items-center justify-between mb-2">
                            <span className="text-sm text-slate-500">{kpi.label}</span>
                            <span className="text-xl">{kpi.icon}</span>
                        </div>
                        <div className="text-2xl font-bold text-slate-800">{kpi.value}</div>
                        <div className={`text-xs mt-1 ${kpi.trend === 'up' ? 'text-green-600' : kpi.trend === 'down' ? 'text-red-600' : 'text-slate-400'}`}>
                            {kpi.sub}
                        </div>
                    </div>
                ))}
            </div>
        );

        // Ï£ºÍ∞Ñ Ï∂úÌá¥Í∑º Ìå®ÌÑ¥
        const WeeklyPattern = ({ data }) => (
            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                <h3 className="text-lg font-semibold text-slate-800 mb-4">Ï£ºÍ∞Ñ Ï∂úÌá¥Í∑º Ìå®ÌÑ¥</h3>
                <div className="space-y-3">
                    {data.map((day, idx) => (
                        <div key={idx} className="flex items-center gap-4">
                            <div className="w-8 text-sm font-medium text-slate-600">{day.day}</div>
                            <div className="flex-1 relative h-8 bg-slate-100 rounded-lg overflow-hidden">
                                {/* Ï†ïÍ∑ú Í∑ºÎ¨¥ÏãúÍ∞Ñ ÌëúÏãú (8-17Ïãú) */}
                                <div className="absolute h-full bg-slate-200" style={{ left: '33%', width: '37.5%' }} />
                                {/* Ïã§Ï†ú Í∑ºÎ¨¥ÏãúÍ∞Ñ */}
                                <div className={`absolute h-full ${day.status === 'late' ? 'bg-red-400' : day.status === 'leave' ? 'bg-purple-400' : 'bg-blue-500'}`}
                                    style={{ left: `${((day.clockIn - 7) / 17) * 100}%`, width: `${((day.clockOut - day.clockIn) / 17) * 100}%` }} />
                            </div>
                            <div className="w-32 text-right text-sm">
                                {day.status === 'leave' ? (
                                    <span className="text-purple-600">Ìú¥Í∞Ä</span>
                                ) : (
                                    <span className={day.status === 'late' ? 'text-red-600' : 'text-slate-600'}>
                                        {day.clockIn}:00 ~ {day.clockOut}:00
                                    </span>
                                )}
                            </div>
                        </div>
                    ))}
                </div>
                <div className="flex items-center justify-center gap-4 mt-4 pt-4 border-t border-slate-100 text-xs text-slate-500">
                    <div className="flex items-center gap-1"><div className="w-3 h-3 bg-slate-200 rounded" />Ï†ïÍ∑ú Í∑ºÎ¨¥</div>
                    <div className="flex items-center gap-1"><div className="w-3 h-3 bg-blue-500 rounded" />Ïã§Ï†ú Í∑ºÎ¨¥</div>
                    <div className="flex items-center gap-1"><div className="w-3 h-3 bg-red-400 rounded" />ÏßÄÍ∞Å</div>
                </div>
            </div>
        );

        // ÏõîÍ∞Ñ Í∑ºÎ¨¥ÏãúÍ∞Ñ Ï∂îÏù¥
        const MonthlyHours = ({ data }) => {
            const max = Math.max(...data.map(d => d.value));
            return (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                    <h3 className="text-lg font-semibold text-slate-800 mb-4">ÏõîÍ∞Ñ Í∑ºÎ¨¥ÏãúÍ∞Ñ Ï∂îÏù¥</h3>
                    <div className="flex items-end gap-2 h-32">
                        {data.map((month, idx) => (
                            <div key={idx} className="flex-1 flex flex-col items-center group">
                                <div className="w-full bg-blue-500 rounded-t hover:bg-blue-600 transition-all cursor-pointer relative" style={{ height: `${(month.value / max) * 100}%`, minHeight: '8px' }}>
                                    <div className="absolute -top-6 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap">{month.value}h</div>
                                </div>
                                <span className="text-xs text-slate-500 mt-2">{month.label}</span>
                            </div>
                        ))}
                    </div>
                    <div className="mt-4 flex justify-center gap-6 text-sm">
                        <div className="text-center"><span className="font-bold text-slate-800">{Math.round(data.reduce((a, b) => a + b.value, 0) / data.length)}h</span><span className="text-slate-500 ml-1">ÏõîÌèâÍ∑†</span></div>
                        <div className="text-center"><span className="font-bold text-green-600">{max}h</span><span className="text-slate-500 ml-1">ÏµúÎåÄ</span></div>
                    </div>
                </div>
            );
        };

        // ÌåÄ ÎÇ¥ ÎπÑÍµê (Îû≠ÌÇπ)
        const TeamRanking = ({ data, currentEmployee }) => (
            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                <h3 className="text-lg font-semibold text-slate-800 mb-4">ÌåÄ ÎÇ¥ ÎπÑÍµê</h3>
                <div className="space-y-3">
                    {data.map((person, idx) => (
                        <div key={idx} className={`flex items-center gap-4 p-3 rounded-xl ${person.name === currentEmployee ? 'bg-blue-50 border border-blue-200' : 'bg-slate-50'}`}>
                            <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${idx === 0 ? 'bg-amber-400 text-white' : idx === 1 ? 'bg-slate-300 text-white' : idx === 2 ? 'bg-amber-600 text-white' : 'bg-slate-200 text-slate-600'}`}>
                                {idx + 1}
                            </div>
                            <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold">{person.name[0]}</div>
                            <div className="flex-1">
                                <div className="font-medium text-slate-800">{person.name}</div>
                                <div className="text-xs text-slate-500">{person.position}</div>
                            </div>
                            <div className="text-right">
                                <div className="font-bold text-slate-800">{person.score}Ï†ê</div>
                                <div className="text-xs text-slate-500">Í∑ºÌÉú Ï†êÏàò</div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        // Î™©Ìëú Îã¨ÏÑ±Î•†
        const GoalProgress = ({ goals }) => (
            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                <h3 className="text-lg font-semibold text-slate-800 mb-4">Î™©Ìëú Îã¨ÏÑ±Î•†</h3>
                <div className="space-y-4">
                    {goals.map((goal, idx) => (
                        <div key={idx}>
                            <div className="flex justify-between text-sm mb-1">
                                <span className="text-slate-600">{goal.label}</span>
                                <span className={`font-medium ${goal.current >= goal.target ? 'text-green-600' : 'text-slate-800'}`}>
                                    {goal.current} / {goal.target} {goal.unit}
                                </span>
                            </div>
                            <div className="h-3 bg-slate-100 rounded-full overflow-hidden">
                                <div className={`h-full rounded-full transition-all ${goal.current >= goal.target ? 'bg-green-500' : 'bg-blue-500'}`}
                                    style={{ width: `${Math.min((goal.current / goal.target) * 100, 100)}%` }} />
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const ReportEmployee = () => {
            const employees = [
                { id: 1, name: 'ÍπÄÌò∏Ï§Ä', dept: 'Í∞úÎ∞ú1ÌåÄ', position: 'ÏÑ†ÏûÑ', empNo: 'EMP-2024-0127', joinDate: '2022-03-15' },
                { id: 2, name: 'ÍπÄÏ≤†Ïàò', dept: 'Í∞úÎ∞ú1ÌåÄ', position: 'ÏÑ†ÏûÑ', empNo: 'EMP-2023-0456', joinDate: '2020-06-01' },
                { id: 3, name: 'Ïù¥ÏòÅÌù¨', dept: 'Í∞úÎ∞ú1ÌåÄ', position: 'Ï±ÖÏûÑ', empNo: 'EMP-2022-0123', joinDate: '2019-01-15' },
                { id: 4, name: 'Î∞ïÎØºÏàò', dept: 'Í∞úÎ∞ú2ÌåÄ', position: 'ÏÇ¨Ïõê', empNo: 'EMP-2024-0789', joinDate: '2024-02-01' },
            ];

            const [selectedId, setSelectedId] = useState('1');
            const selectedEmployee = employees.find(e => e.id === parseInt(selectedId));

            const kpiData = [
                { label: 'Ïù¥Î≤à Îã¨ Í∑ºÎ¨¥ÏãúÍ∞Ñ', value: '168h', sub: 'Î™©Ìëú ÎåÄÎπÑ 100%', icon: '‚è∞', trend: 'up' },
                { label: 'Ï∂úÍ∑ºÏú®', value: '100%', sub: 'ÌåÄ ÌèâÍ∑† 96%', icon: 'üìä', trend: 'up' },
                { label: 'ÏûîÏó¨ Ïó∞Ï∞®', value: '7Ïùº', sub: '15Ïùº Ï§ë', icon: 'üèñÔ∏è', trend: 'neutral' },
                { label: 'Ïó∞Ïû•Í∑ºÎ¨¥', value: '8h', sub: 'Ï£ºÍ∞Ñ 12h ÌïúÎèÑ', icon: 'üîã', trend: 'down' },
            ];

            const weeklyData = [
                { day: 'Ïõî', clockIn: 8, clockOut: 17, status: 'normal' },
                { day: 'Ìôî', clockIn: 8, clockOut: 19, status: 'normal' },
                { day: 'Ïàò', clockIn: 9, clockOut: 17, status: 'late' },
                { day: 'Î™©', clockIn: 8, clockOut: 18, status: 'normal' },
                { day: 'Í∏à', clockIn: 0, clockOut: 0, status: 'leave' },
            ];

            const monthlyData = [
                { label: '8Ïõî', value: 176 }, { label: '9Ïõî', value: 168 }, { label: '10Ïõî', value: 184 },
                { label: '11Ïõî', value: 160 }, { label: '12Ïõî', value: 172 }, { label: '1Ïõî', value: 168 },
            ];

            const teamRankingData = [
                { name: 'Ïù¥ÏòÅÌù¨', position: 'Ï±ÖÏûÑ', score: 98 },
                { name: 'ÍπÄÌò∏Ï§Ä', position: 'ÏÑ†ÏûÑ', score: 95 },
                { name: 'ÍπÄÏ≤†Ïàò', position: 'ÏÑ†ÏûÑ', score: 92 },
                { name: 'Ï†ïÏàòÏßÑ', position: 'ÏÑ†ÏûÑ', score: 88 },
                { name: 'ÌïúÎØ∏Îûò', position: 'ÏÇ¨Ïõê', score: 85 },
            ];

            const goalData = [
                { label: 'ÏõîÍ∞Ñ Í∑ºÎ¨¥ÏãúÍ∞Ñ', current: 168, target: 168, unit: 'h' },
                { label: 'Ï∂úÍ∑ºÏú®', current: 100, target: 95, unit: '%' },
                { label: 'Ìú¥Í∞Ä ÏÜåÏßÑ', current: 8, target: 12, unit: 'Ïùº' },
                { label: 'ÏßÄÍ∞Å ÌöüÏàò', current: 1, target: 0, unit: 'Ìöå' },
            ];

            const handleExport = () => {
                const ws = XLSX.utils.aoa_to_sheet([
                    ['Ìï≠Î™©', 'Í∞í'],
                    ['Ïù¥Î¶Ñ', selectedEmployee.name],
                    ['Î∂ÄÏÑú', selectedEmployee.dept],
                    ['ÏßÅÍ∏â', selectedEmployee.position],
                    ...kpiData.map(k => [k.label, k.value])
                ]);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, 'Í∞úÏù∏Î∂ÑÏÑù');
                XLSX.writeFile(wb, `Í∞úÏù∏Î∂ÑÏÑù_${selectedEmployee.name}_${new Date().toISOString().split('T')[0]}.xlsx`);
            };

            return (
                <div className="max-w-7xl mx-auto">
                    <div className="flex items-center justify-between mb-6">
                        <div>
                            <h1 className="text-2xl font-bold text-slate-800">Í∞úÏù∏Î≥Ñ Î∂ÑÏÑù</h1>
                            <p className="text-slate-500 text-sm">Í∞úÏù∏ Í∑ºÌÉú ÌòÑÌô© Î∞è ÌåÄ ÎÇ¥ ÎπÑÍµê</p>
                        </div>
                        <div className="flex items-center gap-3">
                            <EmployeeSelector employees={employees} selected={selectedId} onSelect={setSelectedId} />
                            <button onClick={handleExport} className="px-4 py-2 bg-green-600 text-white rounded-xl text-sm font-medium hover:bg-green-700">ÏóëÏÖÄ Îã§Ïö¥Î°úÎìú</button>
                        </div>
                    </div>

                    {/* Profile */}
                    <div className="mb-6">
                        <ProfileCard employee={selectedEmployee} />
                    </div>

                    {/* KPIs */}
                    <div className="mb-6">
                        <PersonalKPI data={kpiData} />
                    </div>

                    {/* Charts Grid */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <WeeklyPattern data={weeklyData} />
                        <MonthlyHours data={monthlyData} />
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <TeamRanking data={teamRankingData} currentEmployee={selectedEmployee.name} />
                        <GoalProgress goals={goalData} />
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ReportEmployee />);
    </script>
</body>
</html>
