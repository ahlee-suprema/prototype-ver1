<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>휴가 신청 - Suprema T&A</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans KR', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .toast {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .modal-overlay {
            animation: fadeIn 0.2s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // Toast Context
        const ToastContext = createContext();
        const useToast = () => useContext(ToastContext);

        const ToastProvider = ({ children }) => {
            const [toasts, setToasts] = useState([]);

            const addToast = (message, type = 'success') => {
                const id = Date.now();
                setToasts(prev => [...prev, { id, message, type }]);
                setTimeout(() => {
                    setToasts(prev => prev.filter(t => t.id !== id));
                }, 3000);
            };

            return (
                <ToastContext.Provider value={{ addToast }}>
                    {children}
                    <div className="fixed bottom-4 right-4 z-50 space-y-2">
                        {toasts.map(toast => (
                            <div
                                key={toast.id}
                                className={`toast px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 ${
                                    toast.type === 'success' ? 'bg-green-500 text-white' :
                                    toast.type === 'error' ? 'bg-red-500 text-white' :
                                    toast.type === 'warning' ? 'bg-amber-500 text-white' :
                                    'bg-slate-800 text-white'
                                }`}
                            >
                                {toast.type === 'success' && (
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                    </svg>
                                )}
                                {toast.message}
                            </div>
                        ))}
                    </div>
                </ToastContext.Provider>
            );
        };

        const leaveTypes = [
            { id: 'annual', name: '연차휴가', unit: '일', options: ['1일', '0.5일 (오전)', '0.5일 (오후)'], color: 'bg-blue-500' },
            { id: 'compensatory', name: '대체 휴가', unit: '일', options: ['1일', '0.5일 (오전)', '0.5일 (오후)'], color: 'bg-emerald-500' },
            { id: 'sick', name: '병가', unit: '일', paid: true, color: 'bg-green-500' },
            { id: 'family', name: '경조휴가', unit: '일', subTypes: ['결혼', '출산', '사망'], color: 'bg-purple-500' },
            { id: 'personal', name: '무급휴가', unit: '일', paid: false, color: 'bg-slate-500' },
            { id: 'official', name: '공가', unit: '일', color: 'bg-amber-500' },
            { id: 'maternity', name: '산전후휴가', unit: '일', color: 'bg-pink-500' },
            { id: 'family-care', name: '가족돌봄휴가', unit: '일', color: 'bg-cyan-500' },
            { id: 'reward', name: '포상휴가', unit: '일', color: 'bg-indigo-500' },
            { id: 'health', name: '보건휴가', unit: '일', color: 'bg-rose-500' },
            { id: 'checkup', name: '건강검진 휴가', unit: '일', color: 'bg-teal-500' },
            { id: 'prenatal', name: '태아검진휴가', unit: '일', color: 'bg-orange-500' },
            { id: 'spouse-birth', name: '배우자 출산 휴가', unit: '일', color: 'bg-red-500' },
        ];

        const LeaveRequestForm = () => {
            const toast = useToast();
            const [step, setStep] = useState(1);
            const [selectedType, setSelectedType] = useState(null);
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [startDayType, setStartDayType] = useState('full'); // 'full', 'am', 'pm'
            const [endDayType, setEndDayType] = useState('full'); // 'full', 'am', 'pm'
            const [reason, setReason] = useState('');
            const [showSuccessModal, setShowSuccessModal] = useState(false);
            const [calendarMonth, setCalendarMonth] = useState(new Date(2026, 1, 1)); // February 2026

            const leaveBalance = {
                annual: { used: 8, total: 15 },
                compensatory: { used: 1, total: 3 },
                sick: { used: 0, total: 3 },
                family: { used: 2, total: 5 },
            };

            // Calculate leave days
            const calculateLeaveDays = () => {
                if (!startDate || !endDate) return 0;

                const start = new Date(startDate);
                const end = new Date(endDate);

                // For annual/compensatory leave with half-day options
                if (selectedType?.id === 'annual' || selectedType?.id === 'compensatory') {
                    // If same day
                    if (startDate === endDate) {
                        return startDayType === 'full' ? 1 : 0.5;
                    }

                    // Count weekdays between start and end
                    let total = 0;
                    let isFirstDay = true;
                    let isLastDay = false;

                    for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
                        const day = d.getDay();
                        const dateStr = d.toISOString().split('T')[0];
                        isLastDay = dateStr === endDate;

                        if (day !== 0 && day !== 6) { // Exclude weekends
                            if (isFirstDay) {
                                total += startDayType === 'full' ? 1 : 0.5;
                                isFirstDay = false;
                            } else if (isLastDay) {
                                total += endDayType === 'full' ? 1 : 0.5;
                            } else {
                                total += 1; // Middle days are full days
                            }
                        }
                    }
                    return total;
                }

                // For other leave types, count full days only
                let days = 0;
                for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
                    const day = d.getDay();
                    if (day !== 0 && day !== 6) days++;
                }
                return days;
            };

            const leaveDays = calculateLeaveDays();

            // Check if enough balance
            const hasEnoughBalance = () => {
                if (!selectedType || !leaveBalance[selectedType.id]) return true;
                const remaining = leaveBalance[selectedType.id].total - leaveBalance[selectedType.id].used;
                return leaveDays <= remaining;
            };

            // Generate calendar days
            const generateCalendarDays = () => {
                const year = calendarMonth.getFullYear();
                const month = calendarMonth.getMonth();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const firstDay = new Date(year, month, 1).getDay();

                const days = [];
                for (let i = 0; i < firstDay; i++) {
                    days.push(null);
                }
                for (let i = 1; i <= daysInMonth; i++) {
                    days.push(i);
                }
                return days;
            };

            const isDateInRange = (day) => {
                if (!day || !startDate || !endDate) return false;
                const year = calendarMonth.getFullYear();
                const month = calendarMonth.getMonth();
                // Format as YYYY-MM-DD for consistent string comparison
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                return dateStr >= startDate && dateStr <= endDate;
            };

            const isDateSelected = (day) => {
                if (!day) return false;
                const year = calendarMonth.getFullYear();
                const month = calendarMonth.getMonth();
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                // If both dates selected, check if in range
                if (startDate && endDate) {
                    return dateStr >= startDate && dateStr <= endDate;
                }
                // If only start date selected, highlight just the start date
                if (startDate && !endDate) {
                    return dateStr === startDate;
                }
                return false;
            };

            const handleDateClick = (day) => {
                if (!day) return;
                const year = calendarMonth.getFullYear();
                const month = calendarMonth.getMonth();
                // Format date manually to avoid timezone issues
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                // First click or reset: set as start date
                if (!startDate || (startDate && endDate)) {
                    setStartDate(dateStr);
                    setEndDate('');
                    setStartDayType('full');
                    setEndDayType('full');
                }
                // Second click: set as end date
                else if (startDate && !endDate) {
                    if (dateStr >= startDate) {
                        setEndDate(dateStr);
                    } else {
                        // If clicked date is before start, swap them
                        setEndDate(startDate);
                        setStartDate(dateStr);
                    }
                }
            };

            const handleSubmit = () => {
                if (!hasEnoughBalance()) {
                    toast.addToast('잔여 휴가가 부족합니다.', 'error');
                    return;
                }
                setShowSuccessModal(true);
            };

            const handleConfirmSubmit = () => {
                setShowSuccessModal(false);
                toast.addToast('휴가 신청이 완료되었습니다.', 'success');
                setTimeout(() => {
                    window.location.href = 'leave-management.html';
                }, 1500);
            };

            const renderStep1 = () => (
                <div className="space-y-6">
                    <div>
                        <h3 className="text-lg font-semibold text-slate-800 mb-4">휴가 유형 선택</h3>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                            {leaveTypes.map((type) => (
                                <button
                                    key={type.id}
                                    onClick={() => setSelectedType(type)}
                                    className={`p-4 rounded-xl border-2 text-left transition-all hover:shadow-md ${
                                        selectedType?.id === type.id
                                            ? 'border-blue-500 bg-blue-50'
                                            : 'border-slate-200 hover:border-slate-300 bg-white'
                                    }`}
                                >
                                    <div className="flex items-center gap-2 mb-1">
                                        <div className={`w-3 h-3 rounded-full ${type.color}`}></div>
                                        <span className="font-medium text-slate-800">{type.name}</span>
                                    </div>
                                    {leaveBalance[type.id] && (
                                        <div className="text-sm text-slate-500 mt-1">
                                            잔여: <span className="font-semibold text-slate-700">{leaveBalance[type.id].total - leaveBalance[type.id].used}일</span>
                                            <span className="text-slate-400"> / {leaveBalance[type.id].total}일</span>
                                        </div>
                                    )}
                                </button>
                            ))}
                        </div>
                    </div>

                    {selectedType && leaveBalance[selectedType.id] && (
                        <div className="bg-slate-50 rounded-xl p-4">
                            <div className="flex items-center justify-between">
                                <span className="text-slate-600">선택된 휴가</span>
                                <span className="font-semibold text-slate-800">{selectedType.name}</span>
                            </div>
                            <div className="mt-2 h-2 bg-slate-200 rounded-full overflow-hidden">
                                <div
                                    className="h-full bg-blue-500 rounded-full transition-all"
                                    style={{ width: `${(leaveBalance[selectedType.id].used / leaveBalance[selectedType.id].total) * 100}%` }}
                                />
                            </div>
                            <div className="flex justify-between text-sm mt-1">
                                <span className="text-slate-500">사용: {leaveBalance[selectedType.id].used}일</span>
                                <span className="text-blue-600 font-medium">잔여: {leaveBalance[selectedType.id].total - leaveBalance[selectedType.id].used}일</span>
                            </div>
                        </div>
                    )}
                </div>
            );

            const renderStep2 = () => (
                <div className="space-y-6">
                    <div>
                        <h3 className="text-lg font-semibold text-slate-800 mb-4">기간 선택</h3>

                        {/* Calendar */}
                        <div className="bg-white rounded-xl border border-slate-200 p-4 mb-4">
                            <div className="flex items-center justify-between mb-4">
                                <button
                                    onClick={() => setCalendarMonth(new Date(calendarMonth.getFullYear(), calendarMonth.getMonth() - 1))}
                                    className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                                >
                                    <svg className="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                                    </svg>
                                </button>
                                <span className="text-lg font-semibold text-slate-800">
                                    {calendarMonth.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long' })}
                                </span>
                                <button
                                    onClick={() => setCalendarMonth(new Date(calendarMonth.getFullYear(), calendarMonth.getMonth() + 1))}
                                    className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                                >
                                    <svg className="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                    </svg>
                                </button>
                            </div>
                            <div className="grid grid-cols-7 gap-1 text-center text-sm">
                                {['일', '월', '화', '수', '목', '금', '토'].map((day, idx) => (
                                    <div key={day} className={`py-2 font-medium ${idx === 0 ? 'text-red-500' : idx === 6 ? 'text-blue-500' : 'text-slate-500'}`}>
                                        {day}
                                    </div>
                                ))}
                                {generateCalendarDays().map((day, idx) => {
                                    const isWeekend = idx % 7 === 0 || idx % 7 === 6;
                                    const isSelected = isDateSelected(day);
                                    const isPast = day && new Date(calendarMonth.getFullYear(), calendarMonth.getMonth(), day) < new Date(2026, 0, 27);

                                    return (
                                        <button
                                            key={idx}
                                            onClick={() => !isPast && !isWeekend && handleDateClick(day)}
                                            disabled={isPast || isWeekend || !day}
                                            className={`py-2 rounded-lg transition-all ${
                                                isSelected ? 'bg-blue-600 text-white' :
                                                isPast ? 'text-slate-300 cursor-not-allowed' :
                                                isWeekend && day ? 'text-slate-400 cursor-not-allowed' :
                                                day ? 'text-slate-700 hover:bg-slate-100 cursor-pointer' : ''
                                            }`}
                                        >
                                            {day}
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        {(selectedType?.id === 'annual' || selectedType?.id === 'compensatory') && (
                            <div className={`mb-4 p-3 rounded-lg border ${
                                selectedType?.id === 'annual' ? 'bg-blue-50 border-blue-100' : 'bg-emerald-50 border-emerald-100'
                            }`}>
                                <div className={`flex gap-2 text-sm ${selectedType?.id === 'annual' ? 'text-blue-700' : 'text-emerald-700'}`}>
                                    <svg className="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <span>캘린더에서 날짜를 선택하고, 각 날짜 옆의 드롭다운에서 Full day 또는 Half day를 선택하세요</span>
                                </div>
                            </div>
                        )}

                        <div className="space-y-4">
                            {/* Start Date */}
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-2">시작일</label>
                                <div className="flex gap-3">
                                    <input
                                        type="date"
                                        value={startDate}
                                        onChange={(e) => {
                                            const newStartDate = e.target.value;
                                            setStartDate(newStartDate);
                                            if (endDate && new Date(newStartDate) > new Date(endDate)) {
                                                setEndDate('');
                                            }
                                        }}
                                        min="2026-01-28"
                                        className="flex-1 px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                    {(selectedType?.id === 'annual' || selectedType?.id === 'compensatory') && (
                                        <select
                                            value={startDayType}
                                            onChange={(e) => setStartDayType(e.target.value)}
                                            className="px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"
                                        >
                                            <option value="full">Full day</option>
                                            <option value="am">Half day (AM)</option>
                                            <option value="pm">Half day (PM)</option>
                                        </select>
                                    )}
                                </div>
                            </div>

                            {/* End Date */}
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-2">종료일</label>
                                <div className="flex gap-3">
                                    <input
                                        type="date"
                                        value={endDate}
                                        onChange={(e) => setEndDate(e.target.value)}
                                        min={startDate || "2026-01-28"}
                                        className="flex-1 px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                    {(selectedType?.id === 'annual' || selectedType?.id === 'compensatory') && (
                                        <select
                                            value={endDayType}
                                            onChange={(e) => setEndDayType(e.target.value)}
                                            className="px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"
                                        >
                                            <option value="full">Full day</option>
                                            <option value="am">Half day (AM)</option>
                                            <option value="pm">Half day (PM)</option>
                                        </select>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div className={`mt-4 p-4 rounded-xl ${hasEnoughBalance() ? 'bg-slate-50' : 'bg-red-50 border border-red-200'}`}>
                            <div className="flex justify-between items-center">
                                <span className={hasEnoughBalance() ? 'text-slate-600' : 'text-red-600'}>총 휴가 일수</span>
                                <span className={`text-2xl font-bold ${hasEnoughBalance() ? 'text-blue-600' : 'text-red-600'}`}>
                                    {leaveDays}일
                                </span>
                            </div>
                            {!hasEnoughBalance() && (
                                <div className="mt-2 flex items-center gap-2 text-red-600 text-sm">
                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                    </svg>
                                    <span>잔여 휴가가 부족합니다</span>
                                </div>
                            )}
                        </div>
                    </div>

                    <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">사유 (선택)</label>
                        <textarea
                            value={reason}
                            onChange={(e) => setReason(e.target.value)}
                            placeholder="휴가 사유를 입력하세요..."
                            className="w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none h-24"
                        />
                    </div>
                </div>
            );

            const renderStep3 = () => (
                <div className="space-y-6">
                    <div>
                        <h3 className="text-lg font-semibold text-slate-800 mb-4">결재선 확인</h3>

                        <div className="bg-white rounded-xl border border-slate-200 p-4">
                            <div className="flex items-center justify-around">
                                {/* Requester */}
                                <div className="flex-1 text-center">
                                    <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                        <span className="text-xl font-bold text-blue-600">김</span>
                                    </div>
                                    <div className="font-medium text-slate-800">김호준</div>
                                    <div className="text-xs text-slate-500">신청자</div>
                                    <div className="mt-1 px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs inline-block">작성중</div>
                                </div>

                                {/* Arrow */}
                                <div className="text-slate-300 px-4">
                                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                    </svg>
                                </div>

                                {/* Approver 1 */}
                                <div className="flex-1 text-center">
                                    <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                        <span className="text-xl font-bold text-green-600">박</span>
                                    </div>
                                    <div className="font-medium text-slate-800">박팀장</div>
                                    <div className="text-xs text-slate-500">1차 승인</div>
                                    <div className="mt-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded text-xs inline-block">대기</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Summary */}
                    <div className="bg-blue-50 rounded-xl p-6 border border-blue-100">
                        <h4 className="font-semibold text-blue-800 mb-4">신청 내역 확인</h4>
                        <div className="space-y-3">
                            <div className="flex justify-between">
                                <span className="text-blue-700">휴가 유형</span>
                                <span className="font-medium text-blue-900">{selectedType?.name || '연차휴가'}</span>
                            </div>
                            <div className="flex justify-between">
                                <span className="text-blue-700">기간</span>
                                <span className="font-medium text-blue-900">
                                    {startDate && new Date(startDate).toLocaleDateString('ko-KR')}
                                    {startDate && endDate && startDate !== endDate && ` ~ ${new Date(endDate).toLocaleDateString('ko-KR')}`}
                                </span>
                            </div>
                            <div className="flex justify-between">
                                <span className="text-blue-700">사용 일수</span>
                                <span className="font-medium text-blue-900">{leaveDays}일</span>
                            </div>
                            {reason && (
                                <div className="flex justify-between">
                                    <span className="text-blue-700">사유</span>
                                    <span className="font-medium text-blue-900">{reason}</span>
                                </div>
                            )}
                            {selectedType && leaveBalance[selectedType.id] && (
                                <div className="flex justify-between pt-3 border-t border-blue-200">
                                    <span className="text-blue-700">신청 후 잔여</span>
                                    <span className="font-bold text-blue-900">
                                        {leaveBalance[selectedType.id].total - leaveBalance[selectedType.id].used - leaveDays}일
                                    </span>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="max-w-2xl mx-auto p-6">
                    {/* Header */}
                    <div className="flex items-center gap-4 mb-8">
                        <button
                            onClick={() => window.history.back()}
                            className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                        >
                            <svg className="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                        </button>
                        <div>
                            <h1 className="text-2xl font-bold text-slate-800">휴가 신청</h1>
                            <p className="text-slate-500">새로운 휴가를 신청합니다</p>
                        </div>
                    </div>

                    {/* Progress Steps */}
                    <div className="flex items-center justify-between mb-8">
                        {['휴가 유형', '기간 선택', '결재 확인'].map((label, idx) => (
                            <div key={idx} className="flex items-center">
                                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${
                                    step > idx + 1 ? 'bg-green-500 text-white' :
                                    step === idx + 1 ? 'bg-blue-600 text-white' :
                                    'bg-slate-200 text-slate-500'
                                }`}>
                                    {step > idx + 1 ? (
                                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                        </svg>
                                    ) : idx + 1}
                                </div>
                                <span className={`ml-2 text-sm font-medium ${step === idx + 1 ? 'text-blue-600' : 'text-slate-500'}`}>
                                    {label}
                                </span>
                                {idx < 2 && (
                                    <div className={`w-12 h-0.5 mx-4 ${step > idx + 1 ? 'bg-green-500' : 'bg-slate-200'}`} />
                                )}
                            </div>
                        ))}
                    </div>

                    {/* Form Content */}
                    <div className="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 mb-6">
                        {step === 1 && renderStep1()}
                        {step === 2 && renderStep2()}
                        {step === 3 && renderStep3()}
                    </div>

                    {/* Navigation Buttons */}
                    <div className="flex justify-between">
                        <button
                            onClick={() => setStep(Math.max(1, step - 1))}
                            className={`px-6 py-3 rounded-xl font-medium transition-all ${
                                step === 1 ? 'invisible' : 'bg-slate-100 text-slate-700 hover:bg-slate-200'
                            }`}
                        >
                            이전
                        </button>
                        <button
                            onClick={() => {
                                if (step === 1 && !selectedType) {
                                    toast.addToast('휴가 유형을 선택해주세요.', 'warning');
                                    return;
                                }
                                if (step === 2) {
                                    if (!startDate || !endDate) {
                                        toast.addToast('휴가 날짜를 선택해주세요.', 'warning');
                                        return;
                                    }
                                    if (!hasEnoughBalance()) {
                                        toast.addToast('잔여 휴가가 부족합니다.', 'error');
                                        return;
                                    }
                                }
                                if (step < 3) {
                                    setStep(step + 1);
                                } else {
                                    handleSubmit();
                                }
                            }}
                            disabled={step === 2 && (!startDate || !endDate || !hasEnoughBalance())}
                            className={`px-8 py-3 rounded-xl font-medium transition-colors ${
                                step === 2 && (!startDate || !endDate || !hasEnoughBalance())
                                    ? 'bg-slate-300 text-slate-500 cursor-not-allowed'
                                    : 'bg-blue-600 text-white hover:bg-blue-700'
                            }`}
                        >
                            {step === 3 ? '신청하기' : '다음'}
                        </button>
                    </div>

                    {/* Success Modal */}
                    {showSuccessModal && (
                        <div className="modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 text-center">
                                <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg className="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                    </svg>
                                </div>
                                <h2 className="text-xl font-bold text-slate-800 mb-2">휴가 신청 확인</h2>
                                <p className="text-slate-600 mb-6">
                                    {selectedType?.name} {leaveDays}일을 신청하시겠습니까?<br/>
                                    승인 후 취소가 어려울 수 있습니다.
                                </p>
                                <div className="flex gap-3">
                                    <button
                                        onClick={() => setShowSuccessModal(false)}
                                        className="flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-medium hover:bg-slate-200 transition-colors"
                                    >
                                        취소
                                    </button>
                                    <button
                                        onClick={handleConfirmSubmit}
                                        className="flex-1 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors"
                                    >
                                        확인
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <ToastProvider>
                <LeaveRequestForm />
            </ToastProvider>
        );
    </script>
</body>
</html>
